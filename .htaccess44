Options -Indexes 
ErrorDocument 404 /404.php

#order allow,deny

#allow from all
#allow from 91.220.87.101 173.245.48.0/20 103.21.244.0/22 103.22.200.0/22 103.31.4.0/22 141.101.64.0/18 108.162.192.0/18 190.93.240.0/20 188.114.96.0/20 197.234.240.0/22 198.41.128.0/17 162.158.0.0/15 104.16.0.0/13 104.24.0.0/14 172.64.0.0/13 131.0.72.0/22

#deny from 172.68.50.204 162.158.129.84 162.158.239.11 172.71.94.6 172.71.114.90 172.70.206.192 172.71.114.72 188.114.102.46 172.68.51.167 172.68.50.46 172.70.110.214 108.162.237.118 172.70.85.124 172.70.214.56 172.70.110.160 172.70.230.122 172.70.55.27 188.114.103.221 172.68.50.34 172.71.98.52 172.68.51.207 172.68.50.8 172.68.50.86 172.71.94.122 172.71.94.48 141.101.77.31 172.70.230.170 172.68.50.94 172.69.33.72 172.70.254.160 172.68.110.156 141.101.76.200 172.71.98.134 141.101.76.56 172.70.126.232 172.68.110.186 141.101.76.94 172.71.102.198 172.71.98.8 172.68.110.150 141.101.76.142 141.101.76.26 141.101.76.74 172.71.102.204 172.71.102.64 172.71.94.182 172.68.110.142 172.71.114.104 172.70.114.20 172.70.214.166 172.70.162.32 172.71.22.170 108.162.237.166 172.71.22.52 108.162.237.120 108.162.237.204 108.162.237.72 108.162.237.116 108.162.237.88 108.162.237.198 172.69.33.162 172.70.82.242 108.162.237.96 172.69.70.190 172.69.70.164 172.70.54.206 172.68.221.70 108.162.237.248 108.162.212.27 172.68.174.166 172.70.178.198 172.70.131.175 172.68.221.68 172.68.221.50 108.162.221.236 172.69.70.166 172.69.68.220 108.162.221.234 172.68.174.244 108.162.238.9 108.162.237.78 172.70.82.30 108.162.212.23 172.70.82.88 172.70.254.146 172.70.254.76 172.70.131.99 172.69.70.192 108.162.238.13 172.70.130.118 108.162.237.36 172.70.131.115 172.69.70.150 108.162.212.67 162.158.103.251 162.158.103.195 108.162.237.150 172.71.130.114 172.71.134.106 108.162.237.100 172.68.138.142 172.71.130.8 172.70.55.9 162.158.102.66 162.158.102.64 172.71.114.58 172.70.162.224 172.70.54.234 172.68.221.52 141.101.76.140 172.69.33.170 141.101.68.128 172.70.114.190 172.71.130.24 172.71.102.88 172.71.134.62 172.71.134.26 162.158.129.28 172.68.138.122 172.71.130.76 198.41.242.110 172.68.138.48 141.101.68.190 172.71.118.42 172.71.134.146 141.101.68.68 93.170.200.15 108.162.237.142 162.158.207.150 172.70.174.24 172.71.118.108 172.70.174.142 162.158.102.98 172.71.178.168 172.70.91.131 141.101.68.86 188.114.102.62 172.70.147.116 141.101.68.132 162.158.129.116 172.70.114.40 172.69.33.94 172.71.178.208 162.158.129.162 108.162.212.77 108.162.210.138 172.71.178.204 197.234.243.49 162.158.62.250 172.70.85.152 141.101.76.206 172.70.230.98 141.101.76.24 172.70.126.124 108.162.237.38 108.162.221.202 172.68.175.13 108.162.210.240 172.71.22.22 141.101.77.53 108.162.237.156 108.162.221.96 108.162.237.222 108.162.237.22 141.101.77.17 172.68.118.108 172.68.118.152 172.70.222.234 172.70.126.226 197.234.243.45 162.158.166.170 172.70.135.89 172.70.147.194 162.158.163.155 172.69.33.208 172.70.211.171 172.70.210.240 172.70.206.124 108.162.212.87 172.70.135.219 172.70.222.212 172.70.222.224 172.70.85.94 162.158.118.62 188.114.102.22 172.70.189.151 162.158.170.244 172.70.110.112 172.70.91.49 172.71.166.152 162.158.118.104 172.70.175.13 172.70.86.81 172.70.90.124 172.70.147.130 172.70.142.248 172.70.230.174 162.158.170.224 172.70.188.8 172.70.92.162 188.114.102.20 141.101.76.148 141.101.98.14 162.158.238.224 141.101.96.206 172.70.214.62 172.70.34.148 172.70.110.208 172.70.188.112 108.162.238.7 141.101.96.233 108.162.237.168 162.158.159.74 108.162.221.122 172.70.126.176 108.162.237.124 172.70.82.44 162.158.166.52 162.158.239.21 141.101.107.142 172.70.202.138 162.158.119.107 172.70.162.128 141.101.76.212 141.101.76.192 172.70.223.25 162.158.119.65 172.70.175.129 172.71.178.218 172.70.91.135 162.158.134.84 172.68.118.70 162.158.118.198 172.70.123.89 162.158.207.134 141.101.99.31 162.158.207.146 172.70.254.114 172.70.210.80 162.158.118.116 172.68.119.63 162.158.118.194 162.158.119.83 141.101.96.77 162.158.118.60 141.101.99.127 172.70.114.232 188.114.103.213 172.70.210.100 162.158.162.218 162.158.159.70 172.68.174.242 162.158.62.118 172.70.143.85
#deny from 172.71.142.162 172.71.150.166 108.162.246.63 172.71.142.126 172.71.166.98 108.162.250.149 172.68.226.224 172.71.90.3 172.69.33.164 172.71.122.74 162.158.222.122 172.69.34.15 162.158.38.10 172.71.170.136 172.71.122.94 172.68.226.204 172.70.188.10 108.162.246.139 162.158.162.252 172.70.206.182 172.71.174.166 162.158.78.160 108.162.250.181 172.69.34.41 172.71.166.240 172.71.174.104 162.158.162.84 172.68.146.66 172.69.34.85 172.70.162.210 172.68.226.222 141.101.68.170 162.158.63.9 162.158.126.164 172.70.142.166 162.158.203.97 162.158.62.246 162.158.126.144 162.158.62.158 162.158.118.180 172.70.123.95 162.158.222.148


<IfModule mod_php5.c>
	php_flag allow_call_time_pass_reference 1
	php_flag session.use_trans_sid off

	#php_value display_errors 1

	#php_value mbstring.internal_encoding UTF-8
</IfModule>

<IfModule mod_rewrite.c>
	Options +FollowSymLinks
	RewriteEngine On
												
	# ASPRO_SITEMAP_sitemap-iblock-182 Serve sitemap.xml with sitemap.php only if the latter exists
	RewriteCond %{REQUEST_FILENAME} sitemap-iblock-182.xml
	RewriteCond %{DOCUMENT_ROOT}/sitemap-iblock-182.php -f
	RewriteRule ^(.*)$ /sitemap-iblock-182.php [L]
												
	# ASPRO_SITEMAP_sitemap-files Serve sitemap.xml with sitemap.php only if the latter exists
	RewriteCond %{REQUEST_FILENAME} sitemap-files.xml
	RewriteCond %{DOCUMENT_ROOT}/sitemap-files.php -f
	RewriteRule ^(.*)$ /sitemap-files.php [L]
												
	# ASPRO_SITEMAP_sitemap-iblock-180 Serve sitemap.xml with sitemap.php only if the latter exists
	RewriteCond %{REQUEST_FILENAME} sitemap-iblock-180.xml
	RewriteCond %{DOCUMENT_ROOT}/sitemap-iblock-180.php -f
	RewriteRule ^(.*)$ /sitemap-iblock-180.php [L]

# Редирект с www на без www
#	RewriteCond %{HTTP_HOST} ^www\.(.*) [NC]
#	RewriteRule ^(.*)$ http://%1/$1 [R=301,L]
	
	
		############################################################################
  #### Убираем index.php, если он есть в конце URL                        ####
  ############################################################################
  RewriteCond %{REQUEST_URI} ^(.*)/index\.php$
    # URL cодержит index.php в конце.
  RewriteCond %{REQUEST_METHOD} =GET
    # Выявляем GET запрос в URL (не POST).
  RewriteRule ^(.*)$ %1/ [R=301,L]
    # Удалить index.php из URL.

  ############################################################################
  #### Добавляем слеш(/), если его нет, и это не файл.                    ####
  ############################################################################
  RewriteCond %{REQUEST_URI} !/$
  RewriteCond %{REQUEST_URI} !\.
  RewriteRule ^(.*) %{REQUEST_URI}/ [R=301,L]

  ############################################################################
  #### Убираем повторяющиеся слеши (/) в URL                              ####
  ############################################################################
  RewriteCond %{THE_REQUEST} //
    # Проверяем, повторяется ли слеш (//) более двух раз.
  RewriteCond %{QUERY_STRING} !http(s|)://
    # Убедимся что это не урл в  GET
  RewriteRule .* /$0 [R=301,L]
    # Исключаем все лишние слеши.	
	# ASPRO_ROBOTS Serve robots.txt with robots.php only if the latter exists
	RewriteCond %{REQUEST_FILENAME} robots.txt
	RewriteCond %{DOCUMENT_ROOT}/robots.php -f
	RewriteRule ^(.*)$ /robots.php [L]
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-l
	RewriteCond %{REQUEST_FILENAME} !-d
	RewriteCond %{REQUEST_FILENAME} !/bitrix/urlrewrite.php$
	RewriteRule ^(.*)$ /bitrix/urlrewrite.php [L]
	RewriteRule .* - [E=REMOTE_USER:%{HTTP:Authorization}]
</IfModule>

<IfModule mod_dir.c>
	DirectoryIndex index.php index.html
</IfModule>

<FilesMatch "\.(ogg|ogv|svg|svgz|eot|otf|woff|mp4|ttf|rss|atom|jpg|jpeg|gif|png|ico|zip|tgz|gz|rar|bz2|doc|xls|exe|ppt|tar|mid|midi|wav|bmp|rtf)$">
    Header set Cache-Control "max-age=2592000, must-revalidate"
</FilesMatch>

<FilesMatch "(rk|redirect).(php)$">
RewriteCond %{QUERY_STRING} goto= [NC]
RewriteRule ^.*$ - [F]
</FilesMatch>