function retrieveScale(e){var t=e.width()/2,i=e.offset().left+t,o=e.offset().top+t-$(window).scrollTop(),s=scaleValue(o,i,t,$(window).height(),$(window).width());return e.css("position","fixed").velocity({top:o-t,left:i-t,translateX:0},0),s}function scaleValue(e,t,i,o,s){var a=o/2<t?t:o-t,n=s/2<e?e:s-e;return Math.ceil(Math.sqrt(Math.pow(a,2)+Math.pow(n,2))/i)}function animateLayer(e,t,i){e.velocity({scale:t},400,function(){$("body").toggleClass("overflow-hidden",i),i?e.parents(".cd-section").addClass("modal-is-visible").end().off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"):e.removeClass("is-visible").removeAttr("style").siblings('[data-type="modal-trigger"]').removeClass("to-circle")})}function updateLayer(){var e=$(".cd-section.modal-is-visible .cd-modal-bg"),t=e.width()/2,i=e.siblings(".btn").offset().top+t-$(window).scrollTop(),o=e.siblings(".btn").offset().left+t,s=scaleValue(i,o,t,$(window).height(),$(window).width());e.velocity({top:i-t,left:o-t,scale:s},0)}function closeModal(){$(".cd-modal-bg").fadeOut(),animateLayer($(".cd-modal-bg"),1,!1),$(".cd-modal-bg").removeClass("is-visible")}