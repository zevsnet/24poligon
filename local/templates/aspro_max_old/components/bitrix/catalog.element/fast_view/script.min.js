!function(window){window.JCCatalogOnlyElement||(window.JCCatalogOnlyElement=function(arParams){"object"==typeof arParams&&(this.params=arParams,this.obProduct=null,this.set_quantity=1,this.currentPriceMode="",this.currentPrices=[],this.currentPriceSelected=0,this.currentQuantityRanges=[],this.currentQuantityRangeSelected=0,this.params.MESS&&(this.mess=this.params.MESS),this.init())},window.JCCatalogOnlyElement.prototype={init:function(){var i=0,j=0,treeItems=null;this.obProduct=BX(this.params.ID),this.obProduct&&($(this.obProduct).find(".counter_wrapp .counter_block input").data("product","ob"+this.obProduct.id+"el"),this.currentPriceMode=this.params.ITEM_PRICE_MODE,this.currentPrices=this.params.ITEM_PRICES,this.currentQuantityRanges=this.params.ITEM_QUANTITY_RANGES)},setPriceAction:function(){this.set_quantity=this.params.MIN_QUANTITY_BUY,$(this.obProduct).find("input[name=quantity]").length&&(this.set_quantity=$(this.obProduct).find("input[name=quantity]").val()),this.checkPriceRange(this.set_quantity),$(this.obProduct).find(".not_matrix").hide(),$(this.obProduct).find(".with_matrix .price_value_block").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_PRICE)),$(this.obProduct).find(".with_matrix .discount")&&$(this.obProduct).find(".with_matrix .discount").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].BASE_PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_BASE_PRICE)),"Y"==this.params.SHOW_DISCOUNT_PERCENT_NUMBER&&(this.currentPrices[this.currentPriceSelected].PERCENT>0&&this.currentPrices[this.currentPriceSelected].PERCENT<100?($(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").length||$('<div class="value"></div>').insertBefore($(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .text")),$(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").html("-<span>"+this.currentPrices[this.currentPriceSelected].PERCENT+"</span>%")):$(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").length&&$(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").remove()),$(this.obProduct).find(".with_matrix .sale_block .text .values_wrapper").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].DISCOUNT,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_DISCOUNT)),"NOT_SHOW"in this.params&&"Y"!=this.params.NOT_SHOW&&$(this.obProduct).find(".with_matrix").show(),"Y"==arMaxOptions.THEME.SHOW_TOTAL_SUMM&&void 0!==this.currentPrices[this.currentPriceSelected]&&setPriceItem($(this.obProduct),this.set_quantity,this.currentPrices[this.currentPriceSelected].PRICE)},checkPriceRange:function(quantity){if(void 0!==quantity&&"Q"==this.currentPriceMode){var range,found=!1;for(var i in this.currentQuantityRanges)if(this.currentQuantityRanges.hasOwnProperty(i)&&(range=this.currentQuantityRanges[i],parseInt(quantity)>=parseInt(range.SORT_FROM)&&("INF"==range.SORT_TO||parseInt(quantity)<=parseInt(range.SORT_TO)))){found=!0,this.currentQuantityRangeSelected=range.HASH;break}for(var k in!found&&(range=this.getMinPriceRange())&&(this.currentQuantityRangeSelected=range.HASH),this.currentPrices)if(this.currentPrices.hasOwnProperty(k)&&this.currentPrices[k].QUANTITY_HASH==this.currentQuantityRangeSelected){this.currentPriceSelected=k;break}}},getMinPriceRange:function(){var range;for(var i in this.currentQuantityRanges)this.currentQuantityRanges.hasOwnProperty(i)&&(!range||parseInt(this.currentQuantityRanges[i].SORT_FROM)<parseInt(range.SORT_FROM))&&(range=this.currentQuantityRanges[i]);return range}}),window.JCCatalogElementFast||(window.JCCatalogElementFast=function(arParams){if(this.timerInitCalculateDelivery=!1,this.skuVisualParams={SELECT:{TAG_BIND:"select",TAG:"option",ACTIVE_CLASS:"active",HIDE_CLASS:"hidden",EVENT:"change"},LI:{TAG_BIND:"li",TAG:"li",ACTIVE_CLASS:"active",HIDE_CLASS:"missing",EVENT:"click"}},this.productType=0,this.config={useCatalog:!0,showQuantity:!0,showPrice:!0,showAbsent:!0,showOldPrice:!1,showPercent:!1,showSkuProps:!1,showOfferGroup:!1,useCompare:!1,mainPictureMode:"IMG",showBasisPrice:!1,showPercentNumber:!1,offerShowPreviewPictureProps:!1,basketAction:["BUY"],showClosePopup:!1},this.basketLinkURL="",this.checkQuantity=!1,this.maxQuantity=0,this.SliderImages=0,this.defaultCount=1,this.stepQuantity=1,this.isDblQuantity=!1,this.canBuy=!0,this.currentBasisPrice={},this.canSubscription=!0,this.currentIsSet=!1,this.updateViewedCount=!1,this.currentPriceMode="",this.currentPrices=[],this.currentPriceSelected=0,this.currentQuantityRanges=[],this.currentQuantityRangeSelected=0,this.precision=6,this.precisionFactor=Math.pow(10,this.precision),this.listID={main:["PICT_ID","BIG_SLIDER_ID","BIG_IMG_CONT_ID"],stickers:["STICKER_ID"],productSlider:["SLIDER_CONT","SLIDER_LIST","SLIDER_LEFT","SLIDER_RIGHT"],offerSlider:["SLIDER_CONT_OF_ID","SLIDER_LIST_OF_ID","SLIDER_LEFT_OF_ID","SLIDER_RIGHT_OF_ID"],offerSliderMobile:["SLIDER_CONT_OFM_ID","SLIDER_LIST_OFM_ID","SLIDER_LEFT_OFM_ID","SLIDER_RIGHT_OFM_ID"],offers:["TREE_ID","TREE_ITEM_ID","DISPLAY_PROP_DIV","DISPLAY_PROP_ARTICLE_DIV","OFFER_GROUP"],quantity:["QUANTITY_ID","QUANTITY_UP_ID","QUANTITY_DOWN_ID","QUANTITY_MEASURE","QUANTITY_LIMIT","BASIS_PRICE"],price:["PRICE_ID"],oldPrice:["OLD_PRICE_ID","DISCOUNT_VALUE_ID"],discountPerc:["DISCOUNT_PERC_ID"],basket:["BASKET_PROP_DIV","BUY_ID","BASKET_LINK","ADD_BASKET_ID","BASKET_ACTIONS_ID","NOT_AVAILABLE_MESS","SUBSCRIBE_ID","SUBSCRIBED_ID"],magnifier:["MAGNIFIER_ID","MAGNIFIER_AREA_ID"],compare:["COMPARE_LINK_ID"]},this.visualPostfix={PICT_ID:"_pict",BIG_SLIDER_ID:"_big_slider",BIG_IMG_CONT_ID:"_bigimg_cont",STICKER_ID:"_sticker",SLIDER_CONT:"_slider_cont",SLIDER_LIST:"_slider_list",SLIDER_LEFT:"_slider_left",SLIDER_RIGHT:"_slider_right",SLIDER_CONT_OF_ID:"_slider_cont_",SLIDER_LIST_OF_ID:"_slider_list_",SLIDER_LEFT_OF_ID:"_slider_left_",SLIDER_RIGHT_OF_ID:"_slider_right_",SLIDER_CONT_OFM_ID:"_sliderm_cont_",SLIDER_LIST_OFM_ID:"_sliderm_list_",SLIDER_LEFT_OFM_ID:"_sliderm_left_",SLIDER_RIGHT_OFM_ID:"_sliderm_right_",TREE_ID:"_skudiv",TREE_ITEM_ID:"_prop_",DISPLAY_PROP_DIV:"_sku_prop",DISPLAY_PROP_ARTICLE_DIV:"_sku_article_prop",QUANTITY_ID:"_quantity",QUANTITY_UP_ID:"_quant_up",QUANTITY_DOWN_ID:"_quant_down",QUANTITY_MEASURE:"_quant_measure",QUANTITY_LIMIT:"_quant_limit",BASIS_PRICE:"_basis_price",PRICE_ID:"_price",OLD_PRICE_ID:"_old_price",DISCOUNT_VALUE_ID:"_price_discount",DISCOUNT_PERC_ID:"_dsc_pict",BASKET_PROP_DIV:"_basket_prop",BUY_ID:"_buy_link",BASKET_LINK:"_basket_link",ADD_BASKET_ID:"_add_basket_link",BASKET_ACTIONS_ID:"_basket_actions",NOT_AVAILABLE_MESS:"_not_avail",SUBSCRIBE_ID:"_subscribe_div",SUBSCRIBED_ID:"_subscribed_div",MAGNIFIER_ID:"_magnifier",MAGNIFIER_AREA_ID:"_magnifier_area",OFFER_GROUP:"_set_group_",COMPARE_LINK_ID:"_compare_link"},this.visual={},this.basketMode="",this.product={checkQuantity:!1,maxQuantity:0,stepQuantity:1,startQuantity:1,isDblQuantity:!1,canBuy:!0,canSubscription:!0,name:"",pict:{},id:0,addUrl:"",buyUrl:"",slider:{},sliderCount:0,useSlider:!1,sliderPict:[]},this.mess={},this.basketData={useProps:!1,emptyProps:!1,quantity:"quantity",props:"prop",basketUrl:"",sku_props:"",sku_props_var:"basket_props",add_url:"",buy_url:""},this.compareData={compareUrl:"",comparePath:""},this.defaultPict={preview:null,detail:null},this.offers=[],this.offerNum=0,this.treeProps=[],this.obTreeRows=[],this.showCount=[],this.showStart=[],this.selectedValues={},this.sliders=[],this.obProduct=null,this.obQuantity=null,this.obQuantityUp=null,this.obQuantityDown=null,this.obBasisPrice=null,this.obPict=null,this.obPictAligner=null,this.obPrice={price:null,full:null,discount:null,percent:null},this.obTree=null,this.obBuyBtn=null,this.obBasketBtn=null,this.obAddToBasketBtn=null,this.obBasketActions=null,this.obNotAvail=null,this.obSkuProps=null,this.obSlider=null,this.obMeasure=null,this.obQuantityLimit={all:null,value:null},this.obCompare=null,this.viewedCounter={path:"/bitrix/components/bitrix/catalog.element/ajax.php",params:{AJAX:"Y",SITE_ID:"",PRODUCT_ID:0,PARENT_ID:0}},this.currentImg={src:"",width:0,height:0,screenWidth:0,screenHeight:0,screenOffsetX:0,screenOffsetY:0,scale:1},this.currentBigImg={src:""},this.obPopupWin=null,this.basketUrl="",this.basketParams={},this.obPopupPict=null,this.magnify={obMagnifier:null,obMagnifyPict:null,obMagnifyArea:null,obBigImg:null,obBigSlider:null,magnifyShow:!1,areaParams:{width:100,height:130,left:0,top:0,scaleFactor:1,globalLeft:0,globalTop:0,globalRight:0,globalBottom:0},magnifierParams:{top:0,left:0,width:0,height:0,ratioX:10,ratioY:13,defaultScale:1},magnifyPictParams:{marginTop:0,marginLeft:0,width:0,height:0}},this.treeRowShowSize=5,this.treeEnableArrow={display:"",cursor:"pointer",opacity:1},this.treeDisableArrow={display:"",cursor:"default",opacity:.2},this.sliderRowShowSize=5,this.sliderEnableArrow={display:"",cursor:"pointer",opacity:1},this.sliderDisableArrow={display:"",cursor:"default",opacity:.2},this.errorCode=0,"object"==typeof arParams){switch(this.params=arParams,this.initConfig(),this.params.MESS&&(this.mess=this.params.MESS),this.productType){case 0:case 1:case 2:this.initProductData();break;case 3:this.initOffersData();break;default:this.errorCode=-1}this.initBasketData(),this.initCompareData()}0===this.errorCode&&BX.ready(BX.delegate(this.Init,this)),this.params={}},window.JCCatalogElementFast.prototype.Init=function(){var i=0,j=0,strPrefix="",SliderImgs=null,TreeItems=null;if(this.obProduct=BX(this.visual.ID),this.obProduct||(this.errorCode=-1),this.obPict=BX(this.visual.PICT_ID),this.obPict?this.obPictAligner=this.obPict.parentNode:this.errorCode=-2,this.config.showPrice&&(this.obPrice.price=BX(this.visual.PRICE_ID),!this.obPrice.price&&this.config.useCatalog?this.errorCode=-16:(this.config.showOldPrice&&(this.obPrice.full=BX(this.visual.OLD_PRICE_ID),this.obPrice.discount=BX(this.visual.DISCOUNT_VALUE_ID),this.obPrice.full&&BX.adjust(this.obPrice.full,{style:{display:"none"},html:""})),this.config.showPercent&&(this.obPrice.percent=BX(this.visual.DISCOUNT_PERC_ID))),this.obBasketActions=BX(this.visual.BASKET_ACTIONS_ID),this.obBasketActions&&(BX.util.in_array("BUY",this.config.basketAction)&&(this.obBuyBtn=BX(this.visual.BUY_ID)),BX.util.in_array("ADD",this.config.basketAction)&&(this.obAddToBasketBtn=BX(this.visual.BUY_ID)),this.visual.BASKET_LINK&&(this.obBasketBtn=BX(this.visual.BASKET_LINK))),this.obNotAvail=BX(this.visual.NOT_AVAILABLE_MESS)),this.config.showQuantity&&(this.obQuantity=BX(this.visual.QUANTITY_ID),this.visual.QUANTITY_UP_ID&&(this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)),this.visual.QUANTITY_DOWN_ID&&(this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID)),this.config.showBasisPrice&&(this.obBasisPrice=BX(this.visual.BASIS_PRICE))),3===this.productType){if(this.visual.TREE_ID)for(this.obTree=BX(this.visual.TREE_ID),this.obTree||(this.errorCode=-256),strPrefix=this.visual.TREE_ITEM_ID,i=0;i<this.treeProps.length;i++)if(this.obTreeRows[i]={LEFT:BX(strPrefix+this.treeProps[i].ID+"_left"),RIGHT:BX(strPrefix+this.treeProps[i].ID+"_right"),LIST:BX(strPrefix+this.treeProps[i].ID+"_list"),CONT:BX(strPrefix+this.treeProps[i].ID+"_cont")},!this.obTreeRows[i].LIST||!this.obTreeRows[i].CONT){this.errorCode=-512;break}this.visual.QUANTITY_MEASURE&&(this.obMeasure=BX(this.visual.QUANTITY_MEASURE)),this.visual.QUANTITY_LIMIT&&(this.obQuantityLimit.all=BX(this.visual.QUANTITY_LIMIT),this.obQuantityLimit.all&&(this.obQuantityLimit.value=BX.findChild(this.obQuantityLimit.all,{tagName:"span"},!1,!1),this.obQuantityLimit.value||(this.obQuantityLimit.all=null)))}if(this.config.showSkuProps&&(this.visual.DISPLAY_PROP_DIV&&(this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)),this.visual.DISPLAY_PROP_ARTICLE_DIV&&(this.obSkuArticleProps=BX(this.visual.DISPLAY_PROP_ARTICLE_DIV))),this.config.useCompare&&(this.obCompare=BX(this.visual.COMPARE_LINK_ID)),0===this.errorCode){switch(this.config.showQuantity&&(this.obQuantityUp&&BX.bind(this.obQuantityUp,"click",BX.delegate(this.QuantityUp,this)),this.obQuantityDown&&BX.bind(this.obQuantityDown,"click",BX.delegate(this.QuantityDown,this)),this.obQuantity&&BX.bind(this.obQuantity,"change",BX.delegate(this.QuantityChange,this))),this.productType){case 0:case 1:case 2:if(this.product.useSlider){if(this.product.slider={COUNT:this.product.sliderCount,ID:this.visual.SLIDER_CONT,CONT:BX(this.visual.SLIDER_CONT),LIST:BX(this.visual.SLIDER_LIST),LEFT:BX(this.visual.SLIDER_LEFT),RIGHT:BX(this.visual.SLIDER_RIGHT),START:0},(SliderImgs=BX.findChildren(this.product.slider.LIST,{tagName:"li"},!0))&&0<SliderImgs.length)for(j=0;j<SliderImgs.length;j++)BX.bind(SliderImgs[j],"click",BX.delegate(this.ProductSelectSliderImg,this));this.product.slider.LEFT&&(BX.bind(this.product.slider.LEFT,"click",BX.delegate(this.ProductSliderRowLeft,this)),BX.adjust(this.product.slider.LEFT,{style:this.sliderDisableArrow})),this.product.slider.RIGHT&&(BX.bind(this.product.slider.RIGHT,"click",BX.delegate(this.ProductSliderRowRight,this)),BX.adjust(this.product.slider.RIGHT,{style:this.sliderEnableArrow})),this.setCurrentImg(this.product.sliderPict[0],!0)}break;case 3:for(var key in this.skuVisualParams){var TreeItems;if((TreeItems=BX.findChildren(this.obTree,{tagName:this.skuVisualParams[key].TAG_BIND},!0))&&0<TreeItems.length)for(i=0;i<TreeItems.length;i++)$(TreeItems[i]).on(this.skuVisualParams[key].EVENT,BX.delegate(this.SelectOfferProp,this))}for(i=0;i<this.offers.length;i++)if(this.offers[i].SLIDER_COUNT=parseInt(this.offers[i].SLIDER_COUNT,10),isNaN(this.offers[i].SLIDER_COUNT)&&(this.offers[i].SLIDER_COUNT=0),0===this.offers[i].SLIDER_COUNT)this.sliders[i]={COUNT:this.offers[i].SLIDER_COUNT,ID:""};else{for(j=0;j<this.offers[i].SLIDER.length;j++)this.offers[i].SLIDER[j].WIDTH=parseInt(this.offers[i].SLIDER[j].WIDTH,10),this.offers[i].SLIDER[j].HEIGHT=parseInt(this.offers[i].SLIDER[j].HEIGHT,10);if(this.sliders[i]={COUNT:this.offers[i].SLIDER_COUNT,OFFER_ID:this.offers[i].ID,ID:this.visual.SLIDER_CONT_OF_ID+this.offers[i].ID,CONT:BX(this.visual.SLIDER_CONT_OF_ID+this.offers[i].ID),LIST:BX(this.visual.SLIDER_LIST_OF_ID+this.offers[i].ID),CONT_M:BX(this.visual.SLIDER_CONT_OFM_ID+this.offers[i].ID),LIST_M:BX(this.visual.SLIDER_LIST_OFM_ID+this.offers[i].ID),LEFT:BX(this.visual.SLIDER_LEFT_OF_ID+this.offers[i].ID),RIGHT:BX(this.visual.SLIDER_RIGHT_OF_ID+this.offers[i].ID),START:0},(SliderImgs=BX.findChildren(this.sliders[i].LIST,{tagName:"li"},!0))&&0<SliderImgs.length)for(j=0;j<SliderImgs.length;j++)BX.bind(SliderImgs[j],"click",BX.delegate(this.SelectSliderImg,this));this.sliders[i].LEFT&&BX.bind(this.sliders[i].LEFT,"click",BX.delegate(this.SliderRowLeft,this)),this.sliders[i].RIGHT&&BX.bind(this.sliders[i].RIGHT,"click",BX.delegate(this.SliderRowRight,this))}this.SetCurrent()}this.obBuyBtn&&BX.bind(this.obBuyBtn,"click",BX.proxy(this.BuyBasket,this)),this.obAddToBasketBtn&&BX.bind(this.obAddToBasketBtn,"click",BX.proxy(this.Add2Basket,this)),this.obCompare&&BX.bind(this.obCompare,"click",BX.proxy(this.Compare,this)),this.setMainPictHandler(),setTimeout((function(){$(".offers_img.wof").css("opacity",1)}),400)}},window.JCCatalogElementFast.prototype.initConfig=function(){this.productType=parseInt(this.params.PRODUCT_TYPE,10),this.params.CONFIG&&"object"==typeof this.params.CONFIG?("undefined"!==this.params.CONFIG.USE_CATALOG&&BX.type.isBoolean(this.params.CONFIG.USE_CATALOG)&&(this.config.useCatalog=this.params.CONFIG.USE_CATALOG),this.config.showQuantity=!!this.params.CONFIG.SHOW_QUANTITY,this.config.showPrice=!!this.params.CONFIG.SHOW_PRICE,this.config.showPercent=!!this.params.CONFIG.SHOW_DISCOUNT_PERCENT,this.config.showOldPrice=!!this.params.CONFIG.SHOW_OLD_PRICE,this.config.showSkuProps=!!this.params.CONFIG.SHOW_SKU_PROPS,this.config.showOfferGroup=!!this.params.CONFIG.OFFER_GROUP,this.config.useCompare=!!this.params.CONFIG.DISPLAY_COMPARE,this.config.showPercentNumber="Y"==this.params.SHOW_DISCOUNT_PERCENT_NUMBER,this.config.offerShowPreviewPictureProps=this.params.OFFER_SHOW_PREVIEW_PICTURE_PROPS,this.params.CONFIG.MAIN_PICTURE_MODE&&(this.config.mainPictureMode=this.params.CONFIG.MAIN_PICTURE_MODE),this.config.showBasisPrice=!!this.params.CONFIG.SHOW_BASIS_PRICE,this.params.CONFIG.ADD_TO_BASKET_ACTION&&(this.config.basketAction=this.params.CONFIG.ADD_TO_BASKET_ACTION),this.config.showClosePopup=!!this.params.CONFIG.SHOW_CLOSE_POPUP):("undefined"!==this.params.USE_CATALOG&&BX.type.isBoolean(this.params.USE_CATALOG)&&(this.config.useCatalog=this.params.USE_CATALOG),this.config.showQuantity=!!this.params.SHOW_QUANTITY,this.config.showPrice=!!this.params.SHOW_PRICE,this.config.showPercent=!!this.params.SHOW_DISCOUNT_PERCENT,this.config.showOldPrice=!!this.params.SHOW_OLD_PRICE,this.config.showSkuProps=!!this.params.SHOW_SKU_PROPS,this.config.showOfferGroup=!!this.params.OFFER_GROUP,this.config.useCompare=!!this.params.DISPLAY_COMPARE,this.params.MAIN_PICTURE_MODE&&(this.config.mainPictureMode=this.params.MAIN_PICTURE_MODE),this.config.showBasisPrice=!!this.params.SHOW_BASIS_PRICE,this.params.ADD_TO_BASKET_ACTION&&(this.config.basketAction=this.params.ADD_TO_BASKET_ACTION),this.config.showClosePopup=!!this.params.SHOW_CLOSE_POPUP),this.params.VISUAL&&"object"==typeof this.params.VISUAL&&this.params.VISUAL.ID?(this.visual.ID=this.params.VISUAL.ID,this.basketLinkURL=this.params.BASKET.BASKET_URL,this.defaultCount=this.params.DEFAULT_COUNT,this.storeQuanity=BX(this.params.STORE_QUANTITY),this.initVisualParams("main"),this.config.showQuantity&&this.initVisualParams("quantity"),this.config.showPrice&&this.initVisualParams("price"),this.config.showOldPrice&&this.initVisualParams("oldPrice"),this.config.showPercent&&this.initVisualParams("discountPerc"),this.initVisualParams("basket"),"MAGNIFIER"===this.config.mainPictureMode&&this.initVisualParams("magnifier"),this.config.useCompare&&this.initVisualParams("compare")):this.errorCode=-1},window.JCCatalogElementFast.prototype.initVisualParams=function(ID){var i=0,key="";if(this.listID[ID])for(i=0;i<this.listID[ID].length;i++)key=this.listID[ID][i],this.visual[key]=this.params.VISUAL[key]?this.params.VISUAL[key]:this.visual.ID+this.visualPostfix[key];else this.errorCode=-1},window.JCCatalogElementFast.prototype.initProductData=function(){var j=0;if(this.initVisualParams("productSlider"),this.params.PRODUCT&&"object"==typeof this.params.PRODUCT){if(this.config.showQuantity&&(this.product.checkQuantity=this.params.PRODUCT.CHECK_QUANTITY,this.product.isDblQuantity=this.params.PRODUCT.QUANTITY_FLOAT,this.product.checkQuantity&&(this.product.maxQuantity=this.product.isDblQuantity?parseFloat(this.params.PRODUCT.MAX_QUANTITY):parseInt(this.params.PRODUCT.MAX_QUANTITY,10)),this.product.stepQuantity=this.product.isDblQuantity?parseFloat(this.params.PRODUCT.STEP_QUANTITY):parseInt(this.params.PRODUCT.STEP_QUANTITY,10),this.checkQuantity=this.product.checkQuantity,this.isDblQuantity=this.product.isDblQuantity,this.maxQuantity=this.product.maxQuantity,this.stepQuantity=this.product.stepQuantity,this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor)),this.product.canBuy=this.params.PRODUCT.CAN_BUY,this.product.canSubscription=this.params.PRODUCT.SUBSCRIPTION,this.config.showPrice&&(this.currentBasisPrice=this.params.PRODUCT.BASIS_PRICE),this.canBuy=this.product.canBuy,this.canSubscription=this.product.canSubscription,this.product.name=this.params.PRODUCT.NAME,this.product.pict=this.params.PRODUCT.PICT,this.product.id=this.params.PRODUCT.ID,this.params.PRODUCT.ADD_URL&&(this.product.addUrl=this.params.PRODUCT.ADD_URL),this.params.PRODUCT.BUY_URL&&(this.product.buyUrl=this.params.PRODUCT.BUY_URL),this.params.PRODUCT.SLIDER_COUNT&&(this.product.sliderCount=parseInt(this.params.PRODUCT.SLIDER_COUNT,10),isNaN(this.product.sliderCount)&&(this.product.sliderCount=0),0<this.product.sliderCount&&this.params.PRODUCT.SLIDER.length&&0<this.params.PRODUCT.SLIDER.length)){for(j=0;j<this.params.PRODUCT.SLIDER.length;j++)this.product.useSlider=!0,this.params.PRODUCT.SLIDER[j].WIDTH=parseInt(this.params.PRODUCT.SLIDER[j].WIDTH,10),this.params.PRODUCT.SLIDER[j].HEIGHT=parseInt(this.params.PRODUCT.SLIDER[j].HEIGHT,10);this.product.sliderPict=this.params.PRODUCT.SLIDER,this.setCurrentImg(this.product.sliderPict[0],!1)}this.currentIsSet=!0}else this.errorCode=-1},window.JCCatalogElementFast.prototype.initOffersData=function(){if(this.initVisualParams("offerSlider"),this.initVisualParams("offerSliderMobile"),this.initVisualParams("offers"),this.params.OFFERS&&BX.type.isArray(this.params.OFFERS)){if(this.offers=this.params.OFFERS,this.offerNum=0,this.params.OFFER_SELECTED&&(this.offerNum=parseInt(this.params.OFFER_SELECTED,10),"offers"in this&&this.offers.length)){var objUrl=parseUrlQuery(),sku_params=this.params.SKU_DETAIL_ID,sku_id=0;if("oid"in objUrl&&(sku_id=objUrl.oid),sku_id)for(var i in this.offers)this.offers[i].ID==sku_id&&(this.offerNum=parseInt(i,10))}isNaN(this.offerNum)&&(this.offerNum=0),this.params.TREE_PROPS&&(this.treeProps=this.params.TREE_PROPS),this.params.DEFAULT_PICTURE&&(this.defaultPict.preview=this.params.DEFAULT_PICTURE.PREVIEW_PICTIRE,this.defaultPict.detail=this.params.DEFAULT_PICTURE.DETAIL_PICTURE),this.params.PRODUCT&&"object"==typeof this.params.PRODUCT&&(this.product.id=parseInt(this.params.PRODUCT.ID,10),this.product.name=this.params.PRODUCT.NAME)}else this.errorCode=-1},window.JCCatalogElementFast.prototype.initBasketData=function(){this.params.BASKET&&"object"==typeof this.params.BASKET&&(1!==this.productType&&2!==this.productType||(this.basketData.useProps=!!this.params.BASKET.ADD_PROPS,this.basketData.emptyProps=!!this.params.BASKET.EMPTY_PROPS),this.params.BASKET.QUANTITY&&(this.basketData.quantity=this.params.BASKET.QUANTITY),this.params.BASKET.PROPS&&(this.basketData.props=this.params.BASKET.PROPS),this.params.BASKET.BASKET_URL&&(this.basketData.basketUrl=this.params.BASKET.BASKET_URL),3===this.productType&&this.params.BASKET.SKU_PROPS&&(this.basketData.sku_props=this.params.BASKET.SKU_PROPS),this.params.BASKET.ADD_URL_TEMPLATE&&(this.basketData.add_url=this.params.BASKET.ADD_URL_TEMPLATE),this.params.BASKET.BUY_URL_TEMPLATE&&(this.basketData.buy_url=this.params.BASKET.BUY_URL_TEMPLATE),""===this.basketData.add_url&&""===this.basketData.buy_url&&(this.errorCode=-1024))},window.JCCatalogElementFast.prototype.initCompareData=function(){this.config.useCompare&&(this.params.COMPARE&&"object"==typeof this.params.COMPARE?(this.params.COMPARE.COMPARE_PATH&&(this.compareData.comparePath=this.params.COMPARE.COMPARE_PATH),this.params.COMPARE.COMPARE_URL_TEMPLATE_DEL&&(this.compareData.compareUrlDel=this.params.COMPARE.COMPARE_URL_TEMPLATE_DEL),this.params.COMPARE.COMPARE_URL_TEMPLATE?this.compareData.compareUrl=this.params.COMPARE.COMPARE_URL_TEMPLATE:this.config.useCompare=!1):this.config.useCompare=!1)},window.JCCatalogElementFast.prototype.setMainPictHandler=function(){switch(this.config.mainPictureMode){case"GALLERY":break;case"MAGNIFIER":$(this.obPict).addClass("zoom_picture"),InitZoomPict($("#fast_view_item .zoom_picture"));break;case"POPUP":$(this.obPict).parent().addClass("fancy_offer")}},window.JCCatalogElementFast.prototype.setCurrentImg=function(img,showImage){showImage=!!showImage,"SMALL"in img?this.currentImg.src=img.SMALL.src:"SRC"in img&&(this.currentImg.src=img.SRC),"BIG"in img&&(this.currentBigImg.src=img.BIG.src),"WIDTH"in img&&(this.currentImg.width=img.WIDTH),"HEIGHT"in img&&(this.currentImg.height=img.HEIGHT),showImage&&this.obPict&&("MAGNIFIER"===this.config.mainPictureMode&&($(this.obPict).attr("data-large",this.currentBigImg.src),$(this.obPict).attr("xoriginal",this.currentBigImg.src),$(this.obPict).attr("xpreview",img.SMALL.src)),"src"in this.currentImg&&this.currentImg.src&&BX.adjust(this.obPict,{props:{src:this.currentImg.src}}),"src"in this.currentBigImg&&this.currentBigImg.src&&("POPUP"===this.config.mainPictureMode&&$(this.obPict).parent().attr("href",this.currentBigImg.src),$(this.obPict).parent().attr("title",img.TITLE),$(this.obPict).parent().attr("alt",img.ALT),$(this.obPict).attr("title",img.TITLE),$(this.obPict).attr("alt",img.ALT)))},window.JCCatalogElementFast.prototype.scaleImg=function(src,dest){var scaleX,scaleY,scale,result={};return dest.width>=src.width&&dest.height>=src.height?(result.width=src.width,result.height=src.height):(scaleX=dest.width/src.width,scaleY=dest.height/src.height,scale=Math.min(scaleX,scaleY),result.width=Math.max(1,parseInt(scale*src.width,10)),result.height=Math.max(1,parseInt(scale*src.height,10))),result},window.JCCatalogElementFast.prototype.showMagnifier=function(e){this.magnify.magnifyShow||(this.calcMagnifierParams(),this.calcMagnifyAreaSize(),this.calcMagnifyAreaPos(e),this.calcMagnifyPictSize(),this.calcMagnifyPictPos(),this.setMagnifyAreaParams(!0),this.setMagnifyPictParams(!0),this.setMagnifierParams(!0),BX.bind(document,"mousemove",BX.proxy(this.moveMagnifierArea,this)))},window.JCCatalogElementFast.prototype.hideMagnifier=function(){this.magnify.magnifyShow||(this.magnify.obMagnifier&&BX.adjust(this.magnify.obMagnifier,{style:{display:"none"}}),this.magnify.obMagnifyArea&&BX.adjust(this.magnify.obMagnifyArea,{style:{display:"none"}}),BX.unbind(document,"mousemove",BX.proxy(this.moveMagnifierArea,this)))},window.JCCatalogElementFast.prototype.moveMagnifierArea=function(e){var currentPos={X:0,Y:0},posBigImg=BX.pos(this.obPict),intersect={},params={},paramsPict={};if(currentPos=this.inRect(e,posBigImg),this.inBound(posBigImg,currentPos)){switch((intersect=this.intersectArea(currentPos,posBigImg)).X){case-1:this.magnify.areaParams.left=this.currentImg.screenOffsetX;break;case 0:this.magnify.areaParams.left=this.currentImg.screenOffsetX+currentPos.X-(this.magnify.areaParams.width>>>1);break;case 1:this.magnify.areaParams.left=this.currentImg.screenOffsetX+posBigImg.width-this.magnify.areaParams.width}switch(intersect.Y){case-1:this.magnify.areaParams.top=0;break;case 0:this.magnify.areaParams.top=currentPos.Y-(this.magnify.areaParams.height>>>1);break;case 1:this.magnify.areaParams.top=posBigImg.height-this.magnify.areaParams.height}this.magnify.magnifyPictParams.marginLeft=-parseInt((this.magnify.areaParams.left-this.currentImg.screenOffsetX)*this.currentImg.scale,10),this.magnify.magnifyPictParams.marginTop=-parseInt(this.magnify.areaParams.top*this.currentImg.scale,10),params.left=this.magnify.areaParams.left+"px",params.top=this.magnify.areaParams.top+"px",BX.adjust(this.magnify.obMagnifyArea,{style:params}),paramsPict.marginLeft=this.magnify.magnifyPictParams.marginLeft+"px",paramsPict.marginTop=this.magnify.magnifyPictParams.marginTop+"px",BX.adjust(this.magnify.obMagnifyPict,{style:paramsPict})}else this.outMagnifierArea(),this.hideMagnifier()},window.JCCatalogElementFast.prototype.onMagnifierArea=function(){this.magnify.magnifyShow=!0},window.JCCatalogElementFast.prototype.outMagnifierArea=function(){this.magnify.magnifyShow=!1},window.JCCatalogElementFast.prototype.calcMagnifierParams=function(){if(this.magnify.obBigImg){var pos=BX.pos(this.magnify.obBigImg,!0);this.magnify.magnifierParams.width=pos.width,this.magnify.magnifierParams.height=pos.height,this.magnify.magnifierParams.top=pos.top,this.magnify.magnifierParams.left=pos.left+pos.width+2}},window.JCCatalogElementFast.prototype.setMagnifierParams=function(show){if(this.magnify.obMagnifier){show=!!show;var params={top:this.magnify.magnifierParams.top+"px",left:this.magnify.magnifierParams.left+"px",width:this.magnify.magnifierParams.width+"px",height:this.magnify.magnifierParams.height+"px"};show&&(params.display=""),BX.adjust(this.magnify.obMagnifier,{style:params})}},window.JCCatalogElementFast.prototype.setMagnifyAreaParams=function(show){if(this.magnify.obMagnifier){show=!!show;var params={top:this.magnify.areaParams.top+"px",left:this.magnify.areaParams.left+"px",width:this.magnify.areaParams.width+"px",height:this.magnify.areaParams.height+"px"};show&&(params.display=""),BX.adjust(this.magnify.obMagnifyArea,{style:params})}},window.JCCatalogElementFast.prototype.calcMagnifyAreaPos=function(e){var currentPos,posBigImg,intersect;if(posBigImg=BX.pos(this.obPict),currentPos=this.inRect(e,posBigImg),this.inBound(posBigImg,currentPos)){switch((intersect=this.intersectArea(currentPos,posBigImg)).X){case-1:this.magnify.areaParams.left=this.currentImg.screenOffsetX;break;case 0:this.magnify.areaParams.left=this.currentImg.screenOffsetX+currentPos.X-(this.magnify.areaParams.width>>>1);break;case 1:this.magnify.areaParams.left=this.currentImg.screenOffsetX+posBigImg.width-this.magnify.areaParams.width}switch(intersect.Y){case-1:this.magnify.areaParams.top=0;break;case 0:this.magnify.areaParams.top=currentPos.Y-(this.magnify.areaParams.height>>>1);break;case 1:this.magnify.areaParams.top=posBigImg.height-this.magnify.areaParams.height}}},window.JCCatalogElementFast.prototype.inBound=function(rect,point){return 0<=point.Y&&rect.height>=point.Y&&0<=point.X&&rect.width>=point.X},window.JCCatalogElementFast.prototype.inRect=function(e,rect){var wndSize=BX.GetWindowSize(),currentPos={X:0,Y:0,globalX:0,globalY:0};return currentPos.globalX=e.clientX+wndSize.scrollLeft,currentPos.X=currentPos.globalX-rect.left,currentPos.globalY=e.clientY+wndSize.scrollTop,currentPos.Y=currentPos.globalY-rect.top,currentPos},window.JCCatalogElementFast.prototype.intersectArea=function(currentPos,rect){var intersect={X:0,Y:0},halfX=this.magnify.areaParams.width>>>1,halfY=this.magnify.areaParams.height>>>1;return currentPos.X<=halfX?intersect.X=-1:currentPos.X>=rect.width-halfX?intersect.X=1:intersect.X=0,currentPos.Y<=halfY?intersect.Y=-1:currentPos.Y>=rect.height-halfY?intersect.Y=1:intersect.Y=0,intersect},window.JCCatalogElementFast.prototype.calcMagnifyAreaSize=function(){var scaleX,scaleY,scale;this.magnify.magnifierParams.width<this.currentImg.width&&this.magnify.magnifierParams.height<this.currentImg.height?(scaleX=this.magnify.obBigImg.offsetWidth/this.currentImg.width,scaleY=this.magnify.obBigImg.offsetHeight/this.currentImg.height,scale=Math.min(scaleX,scaleY),this.currentImg.scale=1/scale,this.magnify.areaParams.width=Math.max(1,parseInt(scale*this.magnify.magnifierParams.width,10)),this.magnify.areaParams.height=Math.max(1,parseInt(scale*this.magnify.magnifierParams.height,10)),this.magnify.areaParams.scaleFactor=this.magnify.magnifierParams.defaultScale):(scaleX=this.obPict.offsetWidth/this.magnify.obBigImg.offsetWidth,scaleY=this.obPict.offsetHeight/this.magnify.obBigImg.offsetHeight,scale=Math.min(scaleX,scaleY),this.currentImg.scale=1/scale,this.magnify.areaParams.width=Math.max(1,parseInt(scale*this.magnify.magnifierParams.width,10)),this.magnify.areaParams.height=Math.max(1,parseInt(scale*this.magnify.magnifierParams.height,10)),scaleX=this.magnify.magnifierParams.width/this.currentImg.width,scaleY=this.magnify.magnifierParams.height/this.currentImg.height,scale=Math.max(scaleX,scaleY),this.magnify.areaParams.scaleFactor=scale)},window.JCCatalogElementFast.prototype.calcMagnifyPictSize=function(){this.magnify.magnifyPictParams.width=this.currentImg.width*this.magnify.areaParams.scaleFactor,this.magnify.magnifyPictParams.height=this.currentImg.height*this.magnify.areaParams.scaleFactor},window.JCCatalogElementFast.prototype.calcMagnifyPictPos=function(){this.magnify.magnifyPictParams.marginLeft=-parseInt((this.magnify.areaParams.left-this.currentImg.screenOffsetX)*this.currentImg.scale,10),this.magnify.magnifyPictParams.marginTop=-parseInt(this.magnify.areaParams.top*this.currentImg.scale,10)},window.JCCatalogElementFast.prototype.setMagnifyPictParams=function(show){if(this.magnify.obMagnifier){show=!!show;var params={width:this.magnify.magnifyPictParams.width+"px",height:this.magnify.magnifyPictParams.height+"px",marginTop:this.magnify.magnifyPictParams.marginTop+"px",marginLeft:this.magnify.magnifyPictParams.marginLeft+"px"};show&&(params.display=""),BX.adjust(this.magnify.obMagnifyPict,{style:params,props:{src:this.currentImg.src}})}},window.JCCatalogElementFast.prototype.ProductSliderRowLeft=function(){var target;BX.proxy_context&&this.sliderRowShowSize<this.product.slider.COUNT&&(0>this.product.slider.START&&(this.product.slider.START++,BX.adjust(this.product.slider.LIST,{style:{marginLeft:20*this.product.slider.START+"%"}}),BX.adjust(this.product.slider.RIGHT,{style:this.sliderEnableArrow})),0<=this.product.slider.START&&BX.adjust(this.product.slider.LEFT,{style:this.sliderDisableArrow}))},window.JCCatalogElementFast.prototype.ProductSliderRowRight=function(){var target;BX.proxy_context&&this.sliderRowShowSize<this.product.slider.COUNT&&(this.sliderRowShowSize-this.product.slider.START<this.product.slider.COUNT&&(this.product.slider.START--,BX.adjust(this.product.slider.LIST,{style:{marginLeft:20*this.product.slider.START+"%"}}),BX.adjust(this.product.slider.LEFT,{style:this.sliderEnableArrow})),this.sliderRowShowSize-this.product.slider.START>=this.product.slider.COUNT&&BX.adjust(this.product.slider.RIGHT,{style:this.sliderDisableArrow}))},window.JCCatalogElementFast.prototype.ProductSelectSliderImg=function(){var strValue="",target=BX.proxy_context;target&&target.hasAttribute("data-value")&&(strValue=target.getAttribute("data-value"),this.SetProductMainPict(strValue))},window.JCCatalogElementFast.prototype.SetProductMainPict=function(intPict){var indexPict=-1,i=0,j=0,value="",strValue="",RowItems=null;if(0<this.product.sliderCount){for(j=0;j<this.product.sliderPict.length;j++)if(intPict===this.product.sliderPict[j].ID){indexPict=j;break}if(-1<indexPict&&(this.product.sliderPict[indexPict]&&this.setCurrentImg(this.product.sliderPict[indexPict],!0),(RowItems=BX.findChildren(this.product.slider.LIST,{tagName:"li"},!1))&&0<RowItems.length))for(strValue=intPict,i=0;i<RowItems.length;i++)(value=RowItems[i].getAttribute("data-value"))===strValue?BX.addClass(RowItems[i],"active"):BX.removeClass(RowItems[i],"active")}},window.JCCatalogElementFast.prototype.SliderRowLeft=function(){var strValue="",index=-1,i,target=BX.proxy_context;if(target&&target.hasAttribute("data-value")){for(strValue=target.getAttribute("data-value"),i=0;i<this.sliders.length;i++)if(this.sliders[i].OFFER_ID===strValue){index=i;break}-1<index&&this.sliderRowShowSize<this.sliders[index].COUNT&&(0>this.sliders[index].START&&(this.sliders[index].START++,BX.adjust(this.sliders[index].LIST,{style:{marginLeft:20*this.sliders[index].START+"%"}}),BX.adjust(this.sliders[index].RIGHT,{style:this.sliderEnableArrow})),0<=this.sliders[index].START&&BX.adjust(this.sliders[index].LEFT,{style:this.sliderDisableArrow}))}},window.JCCatalogElementFast.prototype.SliderRowRight=function(){var strValue="",index=-1,i,target=BX.proxy_context;if(target&&target.hasAttribute("data-value")){for(strValue=target.getAttribute("data-value"),i=0;i<this.sliders.length;i++)if(this.sliders[i].OFFER_ID===strValue){index=i;break}-1<index&&this.sliderRowShowSize<this.sliders[index].COUNT&&(this.sliderRowShowSize-this.sliders[index].START<this.sliders[index].COUNT&&(this.sliders[index].START--,BX.adjust(this.sliders[index].LIST,{style:{marginLeft:20*this.sliders[index].START+"%"}}),BX.adjust(this.sliders[index].LEFT,{style:this.sliderEnableArrow})),this.sliderRowShowSize-this.sliders[index].START>=this.sliders[index].COUNT&&BX.adjust(this.sliders[index].RIGHT,{style:this.sliderDisableArrow}))}},window.JCCatalogElementFast.prototype.SelectSliderImg=function(){var strValue="",arItem=[],target=BX.proxy_context;target&&target.hasAttribute("data-value")&&(arItem=(strValue=target.getAttribute("data-value")).split("_"),this.SetMainPict(arItem[0],arItem[1]))},window.JCCatalogElementFast.prototype.SetMainPict=function(intSlider,intPict){var index=-1,indexPict=-1,i,j,value="",RowItems=null,strValue="";for(i=0;i<this.offers.length;i++)if(intSlider===this.offers[i].ID){index=i;break}if($(".thumbs_navigation ul").addClass("hidden_block"),this.SliderImages>1&&$(".thumbs_navigation ul:eq("+index+")").removeClass("hidden_block"),$(".thumbs_navigation").removeClass("hidden_block"),$(".fancy_offer").addClass("hidden_block"),$(this.obPict).closest(".offers_img").css("opacity",0),-1<index&&0<this.offers[index].SLIDER_COUNT){for(j=0;j<this.offers[index].SLIDER.length;j++)if(intPict===this.offers[index].SLIDER[j].ID){indexPict=j;break}if(-1<indexPict&&(this.offers[index].SLIDER[indexPict]&&this.setCurrentImg(this.offers[index].SLIDER[indexPict],!0),(RowItems=BX.findChildren(this.sliders[index].LIST,{tagName:"li"},!1))&&0<RowItems.length))for(strValue=intSlider+"_"+intPict,i=0;i<RowItems.length;i++)(value=RowItems[i].getAttribute("data-value"))===strValue?BX.addClass(RowItems[i],"current"):BX.removeClass(RowItems[i],"current")}setTimeout((function(){$(".fancy_offer").removeClass("hidden_block"),$(".offers_img").css("opacity",1)}),200)},window.JCCatalogElementFast.prototype.SetMainPictFromItem=function(index){if(this.obPict){var boolSet=!1,obNewPict={};this.offers[index]&&(this.offers[index].DETAIL_PICTURE?(obNewPict=this.offers[index].DETAIL_PICTURE,boolSet=!0):this.offers[index].PREVIEW_PICTURE&&(obNewPict=this.offers[index].PREVIEW_PICTURE,boolSet=!0)),boolSet||(this.defaultPict.detail?(obNewPict=this.defaultPict.detail,boolSet=!0):this.defaultPict.preview&&(obNewPict=this.defaultPict.preview,boolSet=!0)),boolSet&&this.setCurrentImg(obNewPict,!0)}},window.JCCatalogElementFast.prototype.showMainPictPopup=function(e){var pictContent="";return pictContent='<div style="text-align: center;"><img src="'+this.currentImg.src+'" width="'+this.currentImg.width+'" height="'+this.currentImg.height+'" name=""></div>',this.obPopupPict.setContent(pictContent),this.obPopupPict.show(),BX.PreventDefault(e)},window.JCCatalogElementFast.prototype.QuantityUp=function(){var curValue=0,boolSet=!0,calcPrice;0===this.errorCode&&this.config.showQuantity&&this.canBuy&&(curValue=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(curValue)||(curValue+=this.stepQuantity,this.checkQuantity&&curValue>this.maxQuantity&&(boolSet=!1),boolSet&&(this.isDblQuantity&&(curValue=Math.round(curValue*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=curValue)))},window.JCCatalogElementFast.prototype.QuantityDown=function(){var curValue=0,boolSet=!0,calcPrice;0===this.errorCode&&this.config.showQuantity&&this.canBuy&&(curValue=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(curValue)||((curValue-=this.stepQuantity)<this.stepQuantity&&(boolSet=!1),boolSet&&(this.isDblQuantity&&(curValue=Math.round(curValue*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=curValue)))},window.JCCatalogElementFast.prototype.QuantityChange=function(){var curValue=0,calcPrice,intCount,count;0===this.errorCode&&this.config.showQuantity&&(this.canBuy?(curValue=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(curValue)?this.obQuantity.value=this.stepQuantity:(this.checkQuantity&&curValue>this.maxQuantity&&(curValue=this.maxQuantity),curValue<this.stepQuantity?curValue=this.stepQuantity:(count=Math.round(curValue*this.precisionFactor/this.stepQuantity)/this.precisionFactor,intCount=parseInt(count,10),isNaN(intCount)&&(intCount=1,count=1.1),count>intCount&&(curValue=intCount<=1?this.stepQuantity:intCount*this.stepQuantity,curValue=Math.round(curValue*this.precisionFactor)/this.precisionFactor)),this.obQuantity.value=curValue)):this.obQuantity.value=this.stepQuantity)},window.JCCatalogElementFast.prototype.QuantitySet=function(index){var basisPrice="",strLimit;0===this.errorCode&&(this.canBuy=this.offers[index].CAN_BUY,this.currentPriceMode=this.offers[index].ITEM_PRICE_MODE,this.currentPrices=this.offers[index].ITEM_PRICES,this.currentPriceSelected=this.offers[index].ITEM_PRICE_SELECTED,this.currentQuantityRanges=this.offers[index].ITEM_QUANTITY_RANGES,this.currentQuantityRangeSelected=this.offers[index].ITEM_QUANTITY_RANGE_SELECTED,this.canBuy?(this.obBasketActions&&BX.style(this.obBasketActions,"display",""),this.obNotAvail&&BX.style(this.obNotAvail,"display","none")):(this.obBasketActions&&(BX.style(this.obBasketActions,"opacity","0"),BX.style(BX.findParent(BX(this.obQuantity),{class:"counter_block"}),"display","none")),this.obNotAvail&&BX.style(this.obNotAvail,"display","")),this.config.showQuantity&&(this.isDblQuantity=this.offers[index].QUANTITY_FLOAT,this.checkQuantity=this.offers[index].CHECK_QUANTITY,this.isDblQuantity?(this.maxQuantity=parseFloat(this.offers[index].MAX_QUANTITY),this.stepQuantity=Math.round(parseFloat(this.offers[index].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor):(this.maxQuantity=parseInt(this.offers[index].MAX_QUANTITY,10),this.stepQuantity=parseInt(this.offers[index].STEP_QUANTITY,10)),this.obMeasure&&(this.offers[index].MEASURE?BX.adjust(this.obMeasure,{html:this.offers[index].MEASURE}):BX.adjust(this.obMeasure,{html:""})),this.obQuantityLimit.all&&(this.checkQuantity?(strLimit=this.offers[index].MAX_QUANTITY,this.offers[index].MEASURE&&(strLimit+=" "+this.offers[index].MEASURE),BX.adjust(this.obQuantityLimit.value,{html:strLimit}),BX.adjust(this.obQuantityLimit.all,{style:{display:""}})):(BX.adjust(this.obQuantityLimit.value,{html:""}),BX.adjust(this.obQuantityLimit.all,{style:{display:"none"}}))),this.obBasisPrice&&(this.offers[index].BASIS_PRICE?(basisPrice=(basisPrice=(basisPrice=BX.message("BASIS_PRICE_MESSAGE")).replace("#PRICE#",BX.Currency.currencyFormat(this.offers[index].BASIS_PRICE.DISCOUNT_VALUE,this.offers[index].BASIS_PRICE.CURRENCY,!0))).replace("#MEASURE#",this.offers[index].MEASURE),BX.adjust(this.obBasisPrice,{style:{display:""},html:basisPrice})):BX.adjust(this.obBasisPrice,{style:{display:"none"},html:""}))),this.currentBasisPrice=this.offers[index].BASIS_PRICE)},window.JCCatalogElementFast.prototype.SelectOfferProp=function(){var i=0,strTreeValue="",arTreeItem=[],RowItems=null,target=BX.proxy_context;if(void 0!==target.options&&void 0!==target.options[target.selectedIndex]&&(target=target.options[target.selectedIndex]),target&&target.hasAttribute("data-treevalue")&&(strTreeValue=target.getAttribute("data-treevalue"),propModes=target.getAttribute("data-showtype"),arTreeItem=strTreeValue.split("_"),this.SearchOfferPropIndex(arTreeItem[0],arTreeItem[1]),(RowItems=BX.findChildren(target.parentNode,{tagName:this.skuVisualParams[propModes.toUpperCase()].TAG},!1))&&0<RowItems.length))for(i=0;i<RowItems.length;i++)value=RowItems[i].getAttribute("data-onevalue"),"TEXT"==propModes?value===arTreeItem[1]?RowItems[i].setAttribute("selected","selected"):RowItems[i].removeAttribute("selected"):value===arTreeItem[1]?$(RowItems[i]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS):$(RowItems[i]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS)},window.JCCatalogElementFast.prototype.SearchOfferPropIndex=function(strPropID,strPropValue){var strName="",arShowValues=!1,arCanBuyValues=[],allValues=[],index=-1,i,j,arFilter={},tmpFilter=[];for(i=0;i<this.treeProps.length;i++)if(this.treeProps[i].ID===strPropID){index=i;break}if(-1<index){for(i=0;i<index;i++)arFilter[strName="PROP_"+this.treeProps[i].ID]=this.selectedValues[strName];for(arFilter[strName="PROP_"+this.treeProps[index].ID]=strPropValue,i=index+1;i<this.treeProps.length&&(strName="PROP_"+this.treeProps[i].ID,arShowValues=this.GetRowValues(arFilter,strName));i++){if(allValues=[],this.config.showAbsent)for(arCanBuyValues=[],tmpFilter=[],tmpFilter=BX.clone(arFilter,!0),j=0;j<arShowValues.length;j++)tmpFilter[strName]=arShowValues[j],allValues[allValues.length]=arShowValues[j],this.GetCanBuy(tmpFilter)&&(arCanBuyValues[arCanBuyValues.length]=arShowValues[j]);else arCanBuyValues=arShowValues;this.selectedValues[strName]&&BX.util.in_array(this.selectedValues[strName],arCanBuyValues)?arFilter[strName]=this.selectedValues[strName]:this.config.showAbsent?arFilter[strName]=arCanBuyValues.length?arCanBuyValues[0]:allValues[0]:arFilter[strName]=arCanBuyValues[0],this.UpdateRow(i,arFilter[strName],arShowValues,arCanBuyValues)}this.selectedValues=arFilter,this.ChangeInfo()}},window.JCCatalogElementFast.prototype.RowLeft=function(){var strTreeValue="",index=-1,i,target=BX.proxy_context;if(target&&target.hasAttribute("data-treevalue")){for(strTreeValue=target.getAttribute("data-treevalue"),i=0;i<this.treeProps.length;i++)if(this.treeProps[i].ID===strTreeValue){index=i;break}-1<index&&this.treeRowShowSize<this.showCount[index]&&0>this.showStart[index]&&(this.showStart[index]++,BX.adjust(this.obTreeRows[index].LIST,{style:{marginLeft:20*this.showStart[index]+"%"}}))}},window.JCCatalogElementFast.prototype.RowRight=function(){var strTreeValue="",index=-1,i,target=BX.proxy_context;if(target&&target.hasAttribute("data-treevalue")){for(strTreeValue=target.getAttribute("data-treevalue"),i=0;i<this.treeProps.length;i++)if(this.treeProps[i].ID===strTreeValue){index=i;break}-1<index&&this.treeRowShowSize<this.showCount[index]&&this.treeRowShowSize-this.showStart[index]<this.showCount[index]&&(this.showStart[index]--,BX.adjust(this.obTreeRows[index].LIST,{style:{marginLeft:20*this.showStart[index]+"%"}}))}},window.JCCatalogElementFast.prototype.UpdateRowsImages=function(){if("object"==typeof this.config.offerShowPreviewPictureProps&&this.config.offerShowPreviewPictureProps.length){var currentTree=this.selectedValues;for(var i in this.obTreeRows)if(BX.util.in_array(this.treeProps[i].CODE,this.config.offerShowPreviewPictureProps)){var RowItems=BX.findChildren(this.obTreeRows[i].LIST,{tagName:"LI"},!1);if(RowItems&&0<RowItems.length)for(var j in RowItems){var ImgItem=BX.findChild(RowItems[j],{className:"cnt_item"},!0,!1);if(ImgItem){var value=RowItems[j].getAttribute("data-onevalue");if(0!=value){var bgi=ImgItem.style.backgroundImage,obgi=ImgItem.getAttribute("data-obgi");obgi||(obgi=bgi,ImgItem.setAttribute("data-obgi",obgi));var boolOneSearch=!1,rowTree=BX.clone(currentTree,!0);for(var m in rowTree["PROP_"+this.treeProps[i].ID]=value,this.offers){for(var n in boolOneSearch=!0,rowTree)if(rowTree[n]!==this.offers[m].TREE[n]){boolOneSearch=!1;break}if(boolOneSearch){var newBgi;if("object"==typeof this.offers[m].PREVIEW_PICTURE&&this.offers[m].PREVIEW_PICTURE.SRC)bgi!==(newBgi='url("'+this.offers[m].PREVIEW_PICTURE.SRC+'")')&&(ImgItem.style.backgroundImage=newBgi,BX.addClass(ImgItem,"pp"));else boolOneSearch=!1;break}}for(var m in this.offers)if(rowTree["PROP_"+this.treeProps[i].ID]==this.offers[m].TREE["PROP_"+this.treeProps[i].ID]&&!boolOneSearch){if("object"==typeof this.offers[m].PREVIEW_PICTURE&&this.offers[m].PREVIEW_PICTURE.SRC){var newBgi='url("'+this.offers[m].PREVIEW_PICTURE.SRC+'")';ImgItem.style.backgroundImage=newBgi,BX.addClass(ImgItem,"pp"),boolOneSearch=!0}break}!boolOneSearch&&obgi&&bgi!==obgi&&(ImgItem.style.backgroundImage=obgi,BX.removeClass(ImgItem,"pp"))}}}}}},window.JCCatalogElementFast.prototype.UpdateRow=function(intNumber,activeID,showID,canBuyID){var i=0,showI=0,value="",countShow=0,strNewLen="",obData={},obDataCont={},RowItems=null,pictMode=!1,extShowMode=!1,isCurrent=!1,selectIndex=0,obLeft=this.treeEnableArrow,obRight=this.treeEnableArrow,currentShowStart=0;if(-1<intNumber&&intNumber<this.obTreeRows.length&&(propMode=this.treeProps[intNumber].DISPLAY_TYPE,(RowItems=BX.findChildren(this.obTreeRows[intNumber].LIST,{tagName:this.skuVisualParams[propMode].TAG},!1))&&0<RowItems.length)){for(selectMode="SELECT"===this.treeProps[intNumber].DISPLAY_TYPE,countShow=showID.length,obData={style:{},props:{disabled:"",selected:""}},obDataCont={style:{}},i=0;i<RowItems.length;i++)isCurrent=(value=RowItems[i].getAttribute("data-onevalue"))===activeID&&0!=value,BX.util.in_array(value,canBuyID)?obData.props.className=isCurrent?this.skuVisualParams[propMode].ACTIVE_CLASS:"":obData.props.className=isCurrent?this.skuVisualParams[propMode].ACTIVE_CLASS+" "+this.skuVisualParams[propMode].HIDE_CLASS:this.skuVisualParams[propMode].HIDE_CLASS,selectMode?(obData.props.disabled="disabled",obData.props.selected=isCurrent?"selected":""):obData.style.display="none",BX.util.in_array(value,showID)&&(selectMode?obData.props.disabled="":obData.style.display="",isCurrent&&(selectIndex=showI),showI++),BX.adjust(RowItems[i],obData);obDataCont.style.display=showI?"":"none",BX.adjust(this.obTreeRows[intNumber].CONT,obDataCont),selectMode&&$(this.obTreeRows[intNumber].LIST).parent().hasClass("ik_select")&&$(this.obTreeRows[intNumber].LIST).ikSelect("reset"),this.showCount[intNumber]=countShow,this.showStart[intNumber]=0}},window.JCCatalogElementFast.prototype.GetRowValues=function(arFilter,index){var arValues=[],i=0,j=0,boolSearch=!1,boolOneSearch=!0;if(0===arFilter.length){for(i=0;i<this.offers.length;i++)BX.util.in_array(this.offers[i].TREE[index],arValues)||(arValues[arValues.length]=this.offers[i].TREE[index]);boolSearch=!0}else for(i=0;i<this.offers.length;i++){for(j in boolOneSearch=!0,arFilter)if(arFilter[j]!==this.offers[i].TREE[j]){boolOneSearch=!1;break}boolOneSearch&&(BX.util.in_array(this.offers[i].TREE[index],arValues)||(arValues[arValues.length]=this.offers[i].TREE[index]),boolSearch=!0)}return!!boolSearch&&arValues},window.JCCatalogElementFast.prototype.GetCanBuy=function(arFilter){var i=0,j=0,boolOneSearch=!0,boolSearch=!1;for(i=0;i<this.offers.length;i++){for(j in boolOneSearch=!0,arFilter)if(arFilter[j]!==this.offers[i].TREE[j]){boolOneSearch=!1;break}if(boolOneSearch&&this.offers[i].CAN_BUY){boolSearch=!0;break}}return boolSearch},window.JCCatalogElementFast.prototype.SetCurrent=function(){var i=0,j=0,strName="",arShowValues=!1,arCanBuyValues=[],arFilter={},tmpFilter=[],current=this.offers[this.offerNum].TREE;for(i=0;i<this.treeProps.length&&(strName="PROP_"+this.treeProps[i].ID,arShowValues=this.GetRowValues(arFilter,strName));i++){if(BX.util.in_array(current[strName],arShowValues)?arFilter[strName]=current[strName]:(arFilter[strName]=arShowValues[0],this.offerNum=0),this.config.showAbsent)for(arCanBuyValues=[],tmpFilter=[],tmpFilter=BX.clone(arFilter,!0),j=0;j<arShowValues.length;j++)tmpFilter[strName]=arShowValues[j],this.GetCanBuy(tmpFilter)&&(arCanBuyValues[arCanBuyValues.length]=arShowValues[j]);else arCanBuyValues=arShowValues;this.UpdateRow(i,arFilter[strName],arShowValues,arCanBuyValues)}this.selectedValues=arFilter,this.ChangeInfo()},window.JCCatalogElementFast.prototype.ChangeInfo=function(){var index=-1,i=0,j=0,RowItems=null,boolOneSearch=!0;for(i=0;i<this.offers.length;i++){for(j in boolOneSearch=!0,this.selectedValues)if(this.selectedValues[j]!==this.offers[i].TREE[j]){boolOneSearch=!1;break}if(boolOneSearch){index=i;break}}if(this.treeProps&&this.UpdateRowsImages(),-1<index){for(i=0;i<this.offers.length;i++)this.config.showOfferGroup&&this.offers[i].OFFER_GROUP&&i!==index&&BX(this.visual.OFFER_GROUP+this.offers[i].ID)&&BX.adjust(BX(this.visual.OFFER_GROUP+this.offers[i].ID),{style:{display:"none"}});if(setViewedProduct(this.offers[index].ID,{PRODUCT_ID:this.offers[index].PRODUCT_ID,IBLOCK_ID:this.offers[index].IBLOCK_ID,NAME:this.offers[index].NAME,DETAIL_PAGE_URL:this.offers[index].URL,PICTURE_ID:this.offers[index].PREVIEW_PICTURE?this.offers[index].PREVIEW_PICTURE.ID:this.offers[index].PARENT_PICTURE?this.offers[index].PARENT_PICTURE.ID:!!this.offers[index].SLIDER_COUNT&&this.offers[index].SLIDER[0].ID,CATALOG_MEASURE_NAME:this.offers[index].MEASURE,MIN_PRICE:this.offers[index].PRICE,CAN_BUY:this.offers[index].CAN_BUY?"Y":"N",IS_OFFER:"Y",WITH_OFFERS:"N"}),this.treeProps)for(var i in this.treeProps){var cont=$("#"+this.visual.ID+"_prop_"+this.treeProps[i].ID+"_cont"),color=cont.find('li[data-treevalue="'+this.treeProps[i].ID+"_"+this.selectedValues["PROP_"+this.treeProps[i].ID]+'"] i').attr("title"),arColor=[];if(color||(color=cont.find('li[data-treevalue="'+this.treeProps[i].ID+"_"+this.selectedValues["PROP_"+this.treeProps[i].ID]+'"]').attr("title")),color&&(arColor=color.split(":")),2==arColor.length){var val=cont.find(".bx_item_section_name .val");val.length?val.html(arColor[1]):cont.find(".bx_item_section_name").append('<span class="val">'+arColor[1]+"</span>")}}if(this.config.showOfferGroup&&this.offers[index].OFFER_GROUP&&BX(this.visual.OFFER_GROUP+this.offers[index].ID)&&BX.adjust(BX(this.visual.OFFER_GROUP+this.offers[index].ID),{style:{display:""}}),this.SetSliderPict(this.offers[index],this.offers[index].SLIDER,this.config),this.offers[index].URL){var arUrl=this.offers[index].URL.split("?");if(arUrl.length>1){var arUrl2=$(".fast_view_frame").find(".form_head h2 a").attr("href").split("?");arUrl2.length>1?($(".fast_view_frame").find(".form_head h2 a").attr("href",$(".fast_view_frame").find(".form_head h2 a").attr("href").replace(arUrl2[1],arUrl[1])),$(".fast_view_frame").find(".btn-wrapper a").attr("href",$(".fast_view_frame").find(".btn-wrapper a").attr("href").replace(arUrl2[1],arUrl[1]))):($(".fast_view_frame").find(".form_head h2 a").attr("href",this.offers[index].URL),$(".fast_view_frame").find(".btn-wrapper a").attr("href",this.offers[index].URL))}}var bSideChar;if($(".properties__container_js").length&&$(".properties__container_js").empty(),this.config.showSkuProps){var html="",display_type=this.offers[index].TYPE_PROP;if(this.offers[index].DISPLAY_PROPERTIES&&0!==this.offers[index].DISPLAY_PROPERTIES.length){for(var i in this.offers[index].DISPLAY_PROPERTIES){var class_block=this.offers[index].DISPLAY_PROPERTIES[i].HINT&&"Y"==this.offers[index].DISPLAY_PROPERTIES[i].SHOW_HINTS?" whint1":"",hint_block=this.offers[index].DISPLAY_PROPERTIES[i].HINT&&"Y"==this.offers[index].DISPLAY_PROPERTIES[i].SHOW_HINTS?'<div class="hint"><span class="icon"><i>?</i></span><div class="tooltip">'+this.offers[index].DISPLAY_PROPERTIES[i].HINT+"</div></div>":"";"TABLE"==display_type?html+='<tr><td class="char_name"><span class="'+class_block+'">'+hint_block+"<span>"+this.offers[index].DISPLAY_PROPERTIES[i].NAME+'</span></span></td><td class="char_value"><span>'+this.offers[index].DISPLAY_PROPERTIES[i].VALUE+"</span></td></tr>":(html='<div class="properties__item properties__item--compact font_xs"><div class="properties__title properties__item--inline muted">'+this.offers[index].DISPLAY_PROPERTIES[i].NAME+'</div><div class="properties__hr properties__item--inline muted">&mdash;</div><div class="properties__value properties__item--inline darken">'+this.offers[index].DISPLAY_PROPERTIES[i].VALUE+"</div></div>",$(this.obProduct).find(".properties__container_js").append(html))}"TABLE"==display_type&&BX.adjust(this.obSkuProps,{style:{display:""},html:html})}else"TABLE"==display_type?BX.adjust(this.obSkuProps,{style:{display:"none"},html:""}):$(this.obProduct).find(".properties__container_js").html(html)}this.config.showSkuProps&&this.obSkuArticleProps&&("DISPLAY_PROPERTIES_CODE"in this.offers[index]&&"ARTICLE"in this.offers[index].DISPLAY_PROPERTIES_CODE?this.offers[index].DISPLAY_PROPERTIES_CODE.ARTICLE.VALUE&&BX.adjust(this.obSkuArticleProps,{style:{display:""},html:this.offers[index].DISPLAY_PROPERTIES_CODE.ARTICLE.VALUE_FORMAT}):"Y"==this.offers[index].SHOW_ARTICLE_SKU&&this.offers[index].ARTICLE_SKU?BX.adjust(this.obSkuArticleProps,{style:{display:""},html:this.offers[index].ARTICLE_SKU}):BX.adjust(this.obSkuArticleProps,{style:{display:"none"},html:""})),$(this.obBasketActions).closest(".counter_wrapp").addClass("hidden_block"),this.offerNum=index,this.QuantitySet(this.offerNum),this.setStoreBlock(this.offers[index].ID),this.setQuantityStore(this.offers[index].MAX_QUANTITY,this.offers[index].AVAILIABLE.TEXT),$(this.obProduct).find(".quantity_block_wrapper .item-stock").html(this.offers[index].AVAILIABLE.HTML),this.incViewedCounter(),$(this.obPict).parent().data("id",this.offers[index].ID);var obj=this.offers[index],th=$(this.obProduct),_th=this;"undefined"!=typeof arBasketAspro?this.setActualDataBlock(th,obj):void 0!==window.frameCacheVars&&BX.addCustomEvent("onFrameDataReceived",(function(){_th.setActualDataBlock(th,obj)})),$(this.obProduct).find(".quantity_block .values").length&&$(this.obProduct).find(".quantity_block .values .item span.value").text(this.offers[index].MAX_QUANTITY).css({opacity:"1"}),"Y"==this.offers[index].SHOW_DISCOUNT_TIME_EACH_SKU&&initCountdownTime($(this.obProduct),this.offers[index].DISCOUNT_ACTIVE),"Y"==arMaxOptions.THEME.CHANGE_TITLE_ITEM&&$(".fast_view_frame").find(".form_head h2 a").text(this.offers[index].NAME)}},window.JCCatalogElementFast.prototype.checkPriceRange=function(quantity){if(void 0!==quantity&&"Q"==this.currentPriceMode){var range,found=!1;for(var i in this.currentQuantityRanges)if(this.currentQuantityRanges.hasOwnProperty(i)&&(range=this.currentQuantityRanges[i],parseInt(quantity)>=parseInt(range.SORT_FROM)&&("INF"==range.SORT_TO||parseInt(quantity)<=parseInt(range.SORT_TO)))){found=!0,this.currentQuantityRangeSelected=range.HASH;break}for(var k in!found&&(range=this.getMinPriceRange())&&(this.currentQuantityRangeSelected=range.HASH),this.currentPrices)if(this.currentPrices.hasOwnProperty(k)&&this.currentPrices[k].QUANTITY_HASH==this.currentQuantityRangeSelected){this.currentPriceSelected=k;break}}},window.JCCatalogElementFast.prototype.getMinPriceRange=function(){var range;for(var i in this.currentQuantityRanges)this.currentQuantityRanges.hasOwnProperty(i)&&(!range||parseInt(this.currentQuantityRanges[i].SORT_FROM)<parseInt(range.SORT_FROM))&&(range=this.currentQuantityRanges[i]);return range},window.JCCatalogElementFast.prototype.setActualDataBlock=function(th,obj){this.setLikeBlock(th,".like_icons .wish_item",obj,"DELAY"),this.setLikeBlock(th,".like_icons .compare_item",obj,"COMPARE"),this.setBuyBlock(th,obj)},window.JCCatalogElementFast.prototype.SetSliderPict=function(obj,slider,config){var container=$(".fastview-product__image .product-detail-gallery__slider--big"),containerThmb=$(".fastview-product__image .product-detail-gallery__slider.thmb"),slideHtml="",slideThmbHtml="";if(countPhoto=obj.SLIDER_COUNT,product=$(this.obProduct).closest(".product-container"),containerThmb.css({"max-width":Math.ceil(70*(countPhoto<=4?countPhoto:4)-10)}),slider.length)for(var i in slider)"object"==typeof slider[i]&&(slideHtml+='<div id="photo-'+i+'" class="product-detail-gallery__item product-detail-gallery__item--big text-center" data-big="'+slider[i].BIG.src+'"><a href="'+slider[i].BIG.src+'" data-fancybox="gallery_fast" class="product-detail-gallery__link fancy"><img class="product-detail-gallery__picture" border="0" src="'+slider[i].SMALL.src+'" alt="'+slider[i].ALT+'" title="'+slider[i].TITLE+'" /></a></div>');else slideHtml+='<div class="product-detail-gallery__item product-detail-gallery__item--big text-center"><span class="product-detail-gallery__link"><img class="product-detail-gallery__picture" border="0" src="'+obj.NO_PHOTO.SRC+'" alt="'+obj.NAME+'" title="'+obj.NAME+'" /></span></div>';if(container.html(slideHtml),product.find(".popup_video").remove(),obj.POPUP_VIDEO){var popup_video='<div class="video-block popup_video '+(slider.length>4?"fromtop":"")+' sm"><a class="various video_link image dark_link" href="'+obj.POPUP_VIDEO+'" title="'+BX.message("POPUP_VIDEO")+'"><span class="play text-upper font_xs">'+BX.message("POPUP_VIDEO")+"</span></a></div>";$(".fastview-product__top-info > .video-block").length&&$(".fastview-product__top-info > .video-block").remove(),$(popup_video).appendTo($(".fastview-product__top-info")),InitFancyBoxVideo()}if(void 0!==container.data("owl.carousel")&&container.data("owl.carousel").destroy(),InitOwlSlider(),InitFancyBox(),"MAGNIFIER"==config.mainPictureMode){var pict="";pict=slider?'<img class="product-detail-gallery__picture zoom_picture" border="0" src="'+slider[0].SMALL.src+'" alt="'+slider[0].ALT+'" title="'+slider[0].TITLE+'" data-xoriginal="'+slider[0].BIG.src+'"/>':'<img class="product-detail-gallery__picture zoom_picture" border="0" src="'+obj.NO_PHOTO.SRC+'" alt="'+obj.NAME+'" title="'+obj.NAME+'" data-xoriginal="'+obj.NO_PHOTO.SRC+'"/>',product.find(".line_link").html(pict),InitZoomPict()}},window.JCCatalogElementFast.prototype.SetSliderPictMobile=function(obj,slider){var container=$(".item_slider.flex"),slideHtml="";if(countPhoto=obj.SLIDER_COUNT,slideHtml='<ul class="slides">',slider.length)for(var i in slider)"object"==typeof slider[i]&&(slideHtml+='<li data-value="'+obj.ID+"_"+slider[i].ID+'"><a href="'+slider[i].BIG.src+'" data-fancybox-group="item_slider" class="fancy popup_link" title="'+slider[i].TITLE+'"><img border="0" src="'+slider[i].SMALL.src+'" alt="'+slider[i].ALT+'" title="'+slider[i].TITLE+'" /><div class="zoom"></div></a></li>');else slideHtml+='<li data-value=""><span data-fancybox-group="item_slider" class="fancy" title="'+obj.NAME+'"><img border="0" src="'+obj.NO_PHOTO.SRC+'" alt="'+obj.NAME+'" title="'+obj.NAME+'" /></span></li>';slideHtml+="</ul>",container.html(slideHtml),container.removeData("flexslider"),container.flexslider({animation:"slide",slideshow:!0,slideshowSpeed:1e4,animationSpeed:600,directionNav:!1,pauseOnHover:!0,animationLoop:!1})},window.JCCatalogElementFast.prototype.setLikeBlock=function(th,className,obj,type){var block=th.closest(".form");"DELAY"==type&&(obj.CAN_BUY?block.find(className+"_button").css("display","inline-block"):block.find(className+"_button").hide()),block.find(className).attr("data-item",obj.ID),arBasketAspro[type]&&(block.find(className+".to").css("display","block"),block.find(className+".in").hide(),void 0!==arBasketAspro[type][obj.ID]&&(block.find(className+".to").hide(),block.find(className+".in").css("display","block").addClass("added")))},window.JCCatalogElementFast.prototype.setBuyBlock=function(th,obj){var buyBlock=th.find(".offer_buy_block"),input_value=obj.CONFIG.MIN_QUANTITY_BUY;buyBlock.find(".counter_wrapp .counter_block").length&&buyBlock.find(".counter_wrapp .counter_block").attr("data-item",obj.ID),this.offers[this.offerNum].offer_set_quantity&&(input_value=this.offers[this.offerNum].offer_set_quantity);var $calculate=buyBlock.closest(".catalog_detail").find(".calculate-delivery");if($calculate.length&&($calculate.each((function(){var $calculateSpan=$(this).find("span[data-event=jqm]").first();if($calculateSpan.length){var $clone=$calculateSpan.clone();$clone.attr("data-param-product_id",obj.ID).attr("data-param-quantity",input_value).removeClass("clicked"),$clone.insertAfter($calculateSpan).on("click",(function(){jQuery.browser.mobile||$(this).parent().addClass("loadings")})),$calculateSpan.remove()}if($(this).hasClass("with_preview")){$(this).removeClass("inited"),this.timerInitCalculateDelivery&&clearTimeout(this.timerInitCalculateDelivery);var that=this;this.timerInitCalculateDelivery=setTimeout((function(){initCalculatePreview(),that.timerInitCalculateDelivery=!1}),1e3)}})),"ADD"===this.offers[this.offerNum].ACTION&&"Y"===this.offers[this.offerNum].CAN_BUY?$calculate.show():$calculate.hide()),$("#fast_view_item .cheaper_form").length){var cheaper_form=$("#fast_view_item .cheaper_form span");cheaper_form.data("autoload-product_name",obj.NAME),cheaper_form.data("autoload-product_id",obj.ID)}if(obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL&&"ADD"==obj.CONFIG.ACTION&&obj.CAN_BUY){var max=obj.CONFIG.MAX_QUANTITY_BUY>0?"data-max='"+obj.CONFIG.MAX_QUANTITY_BUY+"'":"",min,counterHtml='<span class="minus dark-color"'+(obj.CONFIG.SET_MIN_QUANTITY_BUY?"data-min='"+obj.CONFIG.MIN_QUANTITY_BUY+"'":"")+'><i class="svg"><svg width="11" height="1" viewBox="0 0 11 1"><rect width="11" height="1" rx="0.5" ry="0.5"></rect></svg></i></span><input type="text" class="text" name="'+obj.PRODUCT_QUANTITY_VARIABLE+'" value="'+input_value+'" /><span class="plus dark-color" '+max+'><i class="svg"><svg width="11" height="11" viewBox="0 0 11 11"><path d="M1034.5,193H1030v4.5a0.5,0.5,0,0,1-1,0V193h-4.5a0.5,0.5,0,0,1,0-1h4.5v-4.5a0.5,0.5,0,0,1,1,0V192h4.5A0.5,0.5,0,0,1,1034.5,193Z" transform="translate(-1024 -187)"></path></svg></i></span>';arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[obj.ID]?buyBlock.find(".counter_wrapp .counter_block").length?buyBlock.find(".counter_wrapp .counter_block").hide():(buyBlock.find(".counter_wrapp").prepend('<div class="counter_block_inner"><div class="counter_block md" data-item="'+obj.ID+'"></div></div>'),buyBlock.find(".counter_wrapp .counter_block").html(counterHtml).hide()):buyBlock.find(".counter_wrapp .counter_block").length?(buyBlock.find(".counter_wrapp .counter_block_inner").show(),buyBlock.find(".counter_wrapp .counter_block").html(counterHtml).show()):(buyBlock.find(".counter_wrapp").prepend('<div class="counter_block_inner"><div class="counter_block md" data-item="'+obj.ID+'"></div></div>'),buyBlock.find(".counter_wrapp .counter_block").html(counterHtml))}else buyBlock.find(".counter_wrapp .counter_block").length&&buyBlock.find(".counter_wrapp .counter_block").hide();var className="ORDER"==obj.CONFIG.ACTION||!obj.CAN_BUY||!obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL||"SUBSCRIBE"==obj.CONFIG.ACTION&&"Y"==obj.CATALOG_SUBSCRIBE?"wide":"",buyBlockBtn=$('<div class="button_block"></div>');buyBlock.find(".counter_wrapp").find(".button_block").length?arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[obj.ID]?(buyBlock.find(".counter_wrapp").find(".button_block").addClass("wide").html(obj.HTML),markProductAddBasket(obj.ID)):className?(buyBlock.find(".counter_wrapp").find(".button_block").addClass("wide").html(obj.HTML),"undefined"!=typeof arBasketAspro&&arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[obj.ID]&&markProductSubscribe(obj.ID)):buyBlock.find(".counter_wrapp").find(".button_block").removeClass("wide").html(obj.HTML):(buyBlock.find(".counter_wrapp").append('<div class="button_block '+className+'">'+obj.HTML+"</div>"),arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[obj.ID]&&markProductAddBasket(obj.ID),arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[obj.ID]&&markProductSubscribe(obj.ID)),buyBlock.find(".wrapp-one-click").length&&buyBlock.find(".wrapp-one-click").remove(),"NOTHING"!==obj.CONFIG.ACTION?buyBlock.append(obj.ONE_CLICK_BUY_HTML):buyBlock.find(".wrapp-one-click").length&&buyBlock.find(".wrapp-one-click").remove(),buyBlock.fadeIn(),buyBlock.find(".counter_wrapp .counter_block input").data("product","ob"+this.obProduct.id),this.setPriceAction("","Y"),InitFancyBoxVideo(),"object"==typeof obMaxPredictions&&obMaxPredictions.showAll()},window.JCCatalogElementFast.prototype.setStoreBlock=function(id){$(".stores_tab > div").hide(),$(".stores_tab .sku_stores_"+id).show(),$(".fastview-product__info .quantity_block_wrapper .js-show-stores").data("id",id)},window.JCCatalogElementFast.prototype.setQuantityStore=function(quantity,text){parseFloat(quantity)>0?$(this.storeQuanity).find(".icon").removeClass("order").addClass("stock"):$(this.storeQuanity).find(".icon").removeClass("stock").addClass("order"),$(this.storeQuanity).find(".icon + span").html(text),$(".stores_tab").length||$(".item-stock .store_view").removeClass("store_view")},window.JCCatalogElementFast.prototype.CompareCountResult=function(result){if(result.COMPARE_COUNT){for(var i in result.ITEMS){if(result.ITEMS[i]==this.offers[this.offerNum].ID){this.offers[this.offerNum].COMPARE_ACTIVE=!0;break}this.offers[this.offerNum].COMPARE_ACTIVE=!1}this.offers[this.offerNum].COMPARE_ACTIVE?($(this.obCompare).addClass("added"),$(this.obCompare).find(".value:not(.added)").hide(),$(this.obCompare).find(".value.added").css("display","block")):($(this.obCompare).removeClass("added"),$(this.obCompare).find(".value.added").hide(),$(this.obCompare).find(".value:not(.added)").css("display","block"))}},window.JCCatalogElementFast.prototype.ItemInfoResult=function(result){result.HTML&&($(this.obBasketActions).html(result.HTML),$(this.obBasketActions).show(),this.obAddToBasketBtn=BX(this.visual.BUY_ID),this.obBasketBtn=BX(this.visual.BASKET_LINK),this.obSubscribeBtn=BX(this.visual.SUBSCRIBE_ID),this.obSubscribedBtn=BX(this.visual.SUBSCRIBED_ID),BX.bind(this.obAddToBasketBtn,"click",BX.delegate(this.Add2Basket,this)),$(this.obBasketActions).removeClass("wide"),this.ajax_type_item=result.BUYMISSINGGOODS,"ADD"==result.BUYMISSINGGOODS||this.canBuy?$(this.obQuantity).css("display",""):$(this.obBasketActions).addClass("wide"),result.ONE_CLICK_HTML&&$(".wrapp_one_click").html(result.ONE_CLICK_HTML)),basketParams={ajax_action:"Y"},BX.ajax.loadJSON(arMaxOptions.SITE_DIR+"ajax/get_basket_count.php",basketParams,BX.delegate(this.BasketCountResult,this))},window.JCCatalogElementFast.prototype.BasketCountResult=function(result){for(var i in result.ITEMS){if(result.ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].BASKET_ACTIVE=!0;break}this.offers[this.offerNum].BASKET_ACTIVE=!1}for(var i in result.SUBSCRIBE_ITEMS){if(result.SUBSCRIBE_ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].SUBSCRIBE_ACTIVE=!0;break}this.offers[this.offerNum].SUBSCRIBE_ACTIVE=!1}this.BasketStateRefresh()},window.JCCatalogElementFast.prototype.BasketStateRefresh=function(buy_basket){this.offers[this.offerNum].SUBSCRIBE_ACTIVE?($(this.obBasketActions).addClass("wide"),$(this.obSubscribeBtn).hide(),$(this.obSubscribedBtn).show()):($(this.obBasketActions).addClass("wide"),$(this.obSubscribedBtn).hide(),$(this.obSubscribeBtn).show()),this.offers[this.offerNum].BASKET_ACTIVE?($(this.obAddToBasketBtn).hide(),$(this.obQuantity).closest(".counter_wrapp").find(".counter_block").hide(),$(this.obBasketBtn).show(),$(this.obBasketActions).addClass("wide")):($(this.obBasketActions).removeClass("wide"),$(this.obBasketBtn).hide(),("ADD"==this.ajax_type_item||this.canBuy)&&$(this.obQuantity).closest(".counter_wrapp").find(".counter_block").show(),$(this.obAddToBasketBtn).show()),this.canBuy||$(this.obBasketActions).addClass("wide"),this.canBuy&&$(".one_click").removeClass("hidden_block").css("opacity",1),BX.style(this.obBasketActions,"opacity","1"),$(this.obBasketActions).closest(".counter_wrapp").removeClass("hidden_block").css("opacity",1),"undefined"!==buy_basket&&"Y"==buy_basket&&($("#basket_line .basket_fly").length&&$(window).outerWidth()>768?basketFly("open"):$("#basket_line .cart").length&&($("#basket_line .cart").is(".empty_cart")&&($("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call"),touchBasket(".cart:not(.empty_cart) .basket_block .link")),reloadTopBasket("add",$("#basket_line"),200,2e3,"Y")),animateBasketLine(200))},window.JCCatalogElementFast.prototype.setPriceAction=function(change,sku){var measure=this.offers[this.offerNum].MEASURE&&"Y"==this.offers[this.offerNum].SHOW_MEASURE?this.offers[this.offerNum].MEASURE:"",product=$(this.obProduct),check_quantity="",is_sku=void 0!==sku&&"Y"==sku;if(this.offers[this.offerNum].offer_set_quantity=this.offers[this.offerNum].CONFIG.MIN_QUANTITY_BUY,$(product).find("input[name=quantity]").length&&(this.offers[this.offerNum].offer_set_quantity=$(product).find("input[name=quantity]").val()),$(product).find(".price.discount").length&&$(product).find(".price.discount").html(""),$(product).find(".sale_block:not(.matrix)").length&&$(product).find(".sale_block:not(.matrix)").html(""),this.offers[this.offerNum].USE_PRICE_COUNT&&this.offers[this.offerNum].PRICE_MATRIX?(this.checkPriceRange(this.offers[this.offerNum].offer_set_quantity),this.setPriceMatrix()):("PRICES"in this.offers[this.offerNum]&&this.setPrice(this.offers[this.offerNum].PRICES,measure),"Q"==this.offers[this.offerNum].ITEM_PRICE_MODE&&this.offers[this.offerNum].ITEM_PRICES&&(this.checkPriceRange(this.offers[this.offerNum].offer_set_quantity),this.setOnlyPriceFromRange())),product.find(".cost .with_matrix.price_matrix_wrapper").removeClass("no-popup"),product.find(".cost .js_price_wrapper .more-item-info").length||product.find(".cost .with_matrix.price_matrix_wrapper").addClass("no-popup"),"Y"==arMaxOptions.THEME.SHOW_TOTAL_SUMM){var check_quantity;if(this.offers[this.offerNum].check_quantity)check_quantity="Y";else(check_quantity=void 0!==change&&"Y"==change?change:"")&&(this.offers[this.offerNum].check_quantity=!0);void 0!==this.currentPrices[this.currentPriceSelected]&&("ALWAYS"==arMaxOptions.THEME.SHOW_TOTAL_SUMM_TYPE&&(check_quantity=is_sku=""),setPriceItem(product,this.offers[this.offerNum].offer_set_quantity,this.currentPrices[this.currentPriceSelected].PRICE,check_quantity,is_sku))}},window.JCCatalogElementFast.prototype.setOnlyPriceFromRange=function(){if(this.obPrice.price){const product=$(this.obProduct);product.find(".js_price_wrapper > .price_matrix_wrapper").hide(),this.setPriceMatrix({setPriceMatrix:!1})}},window.JCCatalogElementFast.prototype.setPriceMatrix=function(options){var prices="";if(this.obPrice.price){var measure=this.offers[this.offerNum].MEASURE&&"Y"==this.offers[this.offerNum].SHOW_MEASURE?this.offers[this.offerNum].MEASURE:"",strPrice="";let bSetPriceMatrix=!options||options&&options.setPriceMatrix;if(strPrice=getCurrentPrice(this.currentPrices[this.currentPriceSelected].PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_PRICE),measure&&(strPrice+='<span class="price_measure">/'+measure+"</span>"),$(this.obProduct).find(".not_matrix").hide(),$(this.obProduct).find(".with_matrix .price_value_block").html(strPrice),$(this.obProduct).find(".cost").addClass("sku_matrix"),this.config.showOldPrice&&parseFloat(this.currentPrices[this.currentPriceSelected].BASE_PRICE)>parseFloat(this.currentPrices[this.currentPriceSelected].PRICE)?($(this.obProduct).find(".with_matrix .discount").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].BASE_PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_BASE_PRICE)),$(this.obProduct).find(".with_matrix .discount").css("display","inline-block")):($(this.obProduct).find(".with_matrix .discount").html(""),$(this.obProduct).find(".with_matrix .discount").css("display","none")),this.currentPrices[this.currentPriceSelected].PERCENT>0&&this.config.showPercentNumber&&(this.currentPrices[this.currentPriceSelected].PERCENT>0&&this.currentPrices[this.currentPriceSelected].PERCENT<100?($(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").length||$('<div class="value"></div>').insertBefore($(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .text")),$(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").html("-<span>"+this.currentPrices[this.currentPriceSelected].PERCENT+"</span>%")):$(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").length&&$(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").remove()),$(this.obProduct).find(".with_matrix .sale_block .text .values_wrapper").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].DISCOUNT,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_DISCOUNT)),this.config.showPercent&&parseFloat(this.currentPrices[this.currentPriceSelected].DISCOUNT)>0?$(this.obProduct).find(".with_matrix .sale_block").show():$(this.obProduct).find(".with_matrix .sale_block").hide(),$(this.obProduct).find(".with_matrix").show(),bSetPriceMatrix){$(this.obProduct).find(".cost .js_price_wrapper").html(this.offers[this.offerNum].PRICE_MATRIX),this.offers[this.offerNum].SHOW_POPUP_PRICE&&$(this.obProduct).find(".cost .js_price_wrapper").append('<div class="js-show-info-block more-item-info rounded3 bordered-block text-center"><i class="svg inline  svg-inline-fw" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="2" viewBox="0 0 8 2"><path id="Ellipse_292_copy_3" data-name="Ellipse 292 copy 3" class="cls-1" d="M320,4558a1,1,0,1,1-1,1A1,1,0,0,1,320,4558Zm-3,0a1,1,0,1,1-1,1A1,1,0,0,1,317,4558Zm6,0a1,1,0,1,1-1,1A1,1,0,0,1,323,4558Z" transform="translate(-316 -4558)"></path></svg></i></div>');var eventdata={product:$(this.obProduct),measure:measure,config:this.config,offer:this.offers[this.offerNum],obPrice:this.currentPrices[this.currentPriceSelected]};BX.onCustomEvent("onAsproSkuSetPriceMatrix",[eventdata])}}},window.JCCatalogElementFast.prototype.setPrice=function(obPrices,measure){var prices="";if(this.obPrice.price){var measure=this.offers[this.offerNum].MEASURE&&"Y"==this.offers[this.offerNum].SHOW_MEASURE?this.offers[this.offerNum].MEASURE:"",product=$(this.obProduct),obPrices;if("object"==typeof(obPrices=this.offers[this.offerNum].PRICES)){product.find(".with_matrix").hide(),product.find(".cost").removeClass("sku_matrix"),product.find(".cost .js_price_wrapper").html(this.offers[this.offerNum].PRICES_HTML);var eventdata={product:product,measure:measure,config:this.config,offer:this.offers[this.offerNum],obPrices:obPrices};BX.onCustomEvent("onAsproSkuSetPrice",[eventdata])}}},window.JCCatalogElementFast.prototype.Compare=function(){var compareParams,compareLink;if($(this.obCompare).find(".added").is(":visible")?(compareLink=this.compareData.compareUrlDel,this.compareData.Added=!1):(compareLink=this.compareData.compareUrl,this.compareData.Added=!0),compareLink){switch(this.productType){case 1:case 2:compareLink=compareLink.replace("#ID#",this.product.id.toString());break;case 3:compareLink=compareLink.replace("#ID#",this.offers[this.offerNum].ID)}compareParams={ajax_action:"Y"},BX.ajax.loadJSON(compareLink,compareParams,BX.proxy(this.CompareResult,this))}},window.JCCatalogElementFast.prototype.CompareResult=function(result){var popupContent,popupButtons,popupTitle;return"object"==typeof result&&("OK"===result.STATUS?(BX.onCustomEvent("OnCompareChange"),this.compareData.Added?($(this.obCompare).addClass("added"),$(this.obCompare).find(".value:not(.added)").hide(),$(this.obCompare).find(".added").css("display","block")):($(this.obCompare).removeClass("added"),$(this.obCompare).find(".added").hide(),$(this.obCompare).find(".value:not(.added)").css("display","block")),jsAjaxUtil.InsertDataToNode(arMaxOptions.SITE_DIR+"ajax/show_compare_preview_top.php","compare_line",!1)):console.log(BX.message("ADD_ERROR_COMPARE")),!1)},window.JCCatalogElementFast.prototype.CompareRedirect=function(){this.compareData.comparePath?location.href=this.compareData.comparePath:this.obPopupWin.close()},window.JCCatalogElementFast.prototype.InitBasketUrl=function(){var product_url="";switch(this.basketUrl="ADD"===this.basketMode?this.basketData.add_url:this.basketData.buy_url,this.productType){case 1:case 2:this.basketUrl=this.basketUrl.replace("#ID#",this.product.id.toString()),product_url=this.product.id.toString();break;case 3:this.basketUrl=this.basketUrl.replace("#ID#",this.offers[this.offerNum].ID),product_url=this.offers[this.offerNum].URL}this.basketParams={ajax_basket:"Y"},this.config.showQuantity&&(this.basketParams[this.basketData.quantity]=this.obQuantity.value),this.basketData.sku_props&&(this.basketParams[this.basketData.sku_props_var]=this.basketData.sku_props),product_url&&(this.basketParams.REQUEST_URI=product_url)},window.JCCatalogElementFast.prototype.FillBasketProps=function(){if(this.visual.BASKET_PROP_DIV){var i=0,propCollection=null,foundValues=!1,obBasketProps=null;if(this.basketData.useProps&&!this.basketData.emptyProps?this.obPopupWin&&this.obPopupWin.contentContainer&&(obBasketProps=this.obPopupWin.contentContainer):obBasketProps=BX(this.visual.BASKET_PROP_DIV),obBasketProps){if((propCollection=obBasketProps.getElementsByTagName("select"))&&propCollection.length)for(i=0;i<propCollection.length;i++)if(!propCollection[i].disabled)switch(propCollection[i].type.toLowerCase()){case"select-one":this.basketParams[propCollection[i].name]=propCollection[i].value,foundValues=!0}if((propCollection=obBasketProps.getElementsByTagName("input"))&&propCollection.length)for(i=0;i<propCollection.length;i++)if(!propCollection[i].disabled)switch(propCollection[i].type.toLowerCase()){case"hidden":this.basketParams[propCollection[i].name]=propCollection[i].value,foundValues=!0;break;case"radio":propCollection[i].checked&&(this.basketParams[propCollection[i].name]=propCollection[i].value,foundValues=!0)}}foundValues||(this.basketParams[this.basketData.props]=[],this.basketParams[this.basketData.props][0]=0)}},window.JCCatalogElementFast.prototype.SendToBasket=function(){this.canBuy&&(this.InitBasketUrl(),this.FillBasketProps(),BX.ajax.loadJSON(this.basketUrl,this.basketParams,BX.proxy(this.BasketResult,this)))},window.JCCatalogElementFast.prototype.Add2Basket=function(){this.basketMode="ADD",this.Basket()},window.JCCatalogElementFast.prototype.BuyBasket=function(){this.basketMode="BUY",this.Basket()},window.JCCatalogElementFast.prototype.Basket=function(){var contentBasketProps="";this.canBuy&&this.SendToBasket()},window.JCCatalogElementFast.prototype.BasketResult=function(arResult){var popupContent,popupButtons,popupTitle,productPict;return this.obPopupWin&&this.obPopupWin.close(),"object"==typeof arResult&&("OK"===arResult.STATUS&&"BUY"===this.basketMode?this.BasketRedirect():(popupTitle={content:BX.create("div",{style:{marginRight:"30px",whiteSpace:"nowrap"},text:"OK"===arResult.STATUS?BX.message("TITLE_SUCCESSFUL"):BX.message("TITLE_ERROR")})},"OK"===arResult.STATUS?(BX.onCustomEvent("OnBasketChange"),this.offers[this.offerNum].BASKET_ACTIVE=!0,this.BasketStateRefresh("Y")):console.log(BX.message("ADD_ERROR_BASKET"))),!1)},window.JCCatalogElementFast.prototype.BasketRedirect=function(){location.href=this.basketData.basketUrl?this.basketData.basketUrl:BX.message("BASKET_URL")},window.JCCatalogElementFast.prototype.InitPopupWindow=function(){this.obPopupWin||(this.obPopupWin=BX.PopupWindowManager.create("CatalogElementBasket_"+this.visual.ID,null,{autoHide:!1,offsetLeft:0,offsetTop:0,overlay:!0,closeByEsc:!0,titleBar:!0,closeIcon:{top:"10px",right:"10px"}}))},window.JCCatalogElementFast.prototype.onPopupWindowShow=function(popup){BX.bind(document,"click",BX.proxy(this.popupWindowClick,this))},window.JCCatalogElementFast.prototype.onPopupWindowClose=function(popup,event){BX.unbind(document,"click",BX.proxy(this.popupWindowClick,this))},window.JCCatalogElementFast.prototype.popupWindowClick=function(){this.obPopupPict&&"object"==typeof this.obPopupPict&&this.obPopupPict.isShown()&&this.obPopupPict.close()},window.JCCatalogElementFast.prototype.incViewedCounter=function(){if(this.currentIsSet&&!this.updateViewedCount){switch(this.productType){case 1:case 2:this.viewedCounter.params.PRODUCT_ID=this.product.id,this.viewedCounter.params.PARENT_ID=this.product.id;break;case 3:this.viewedCounter.params.PARENT_ID=this.product.id,this.viewedCounter.params.PRODUCT_ID=this.offers[this.offerNum].ID;break;default:return}this.viewedCounter.params.SITE_ID=BX.message("SITE_ID"),this.updateViewedCount=!0,BX.ajax.post(this.viewedCounter.path,this.viewedCounter.params,BX.delegate((function(){this.updateViewedCount=!1}),this))}},window.JCCatalogElementFast.prototype.allowViewedCount=function(update){update=!!update,this.currentIsSet=!0,update&&this.incViewedCounter()})}(window),$(document).on("click",".navigation-wrapper-fast-view .fast-view-nav",(function(){var _this=$(this);if(_this.hasClass("noAjax"))return!1;var data=_this.data("ajax");_this.addClass("noAjax"),data.action=_this.data("fast-nav");var container=_this.closest("#popup_iframe_wrapper").find(".fast_view_frame");container.addClass("blur"),$.ajax({url:arAsproOptions.SITE_DIR+"ajax/fastViewNav.php",type:"POST",data:data,success:function(result){$("#fast_view_item").html(result),container.removeClass("blur"),_this.removeClass("noAjax")}})})),window.addEventListener("keydown",(function(e){if(37==e.keyCode){var navPrev=$("#popup_iframe_wrapper .navigation-wrapper-fast-view .fast-view-nav.prev");navPrev.length&&navPrev.click()}else if(39==e.keyCode){var navNext=$("#popup_iframe_wrapper .navigation-wrapper-fast-view .fast-view-nav.next");navNext.length&&navNext.click()}}));