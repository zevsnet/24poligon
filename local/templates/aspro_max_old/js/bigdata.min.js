function setBigData(params){const{siteId:siteId,template:template,componentPath:componentPath,parameters:parameters,bigData:bigData,wrapper:wrapper,countBigdata:countBigdata}=params;if(bigData&&"object"==typeof bigData&&!(bigData instanceof Array)){BX.cookie_prefix=bigData.js.cookiePrefix||"",BX.cookie_domain=bigData.js.cookieDomain||"",BX.current_server_time=bigData.js.serverTime;let url="https://analytics.bitrix.info/crecoms/v1_0/recoms.php";const data=BX.ajax.prepareData(bigData.params);data&&(url+=(-1!==url.indexOf("?")?"&":"?")+data);const onReady=function(result){sendRequest({action:"deferredLoad",bigData:"Y",items:result&&result.items||[],rid:result&&result.id,count:countBigdata,rowsRange:[countBigdata],shownIds:bigData.shownIds,siteId:siteId,template:template,parameters:parameters})};function sendRequest(data){BX.ajax({url:componentPath+"/ajax.php"+(-1!==document.location.href.indexOf("clear_cache=Y")?"?clear_cache=Y":""),method:"POST",dataType:"json",timeout:60,data:data,onsuccess:function(result){if(result&&result.JS){$(wrapper).html(result.items);var eventdata={action:"jsLoadBlock"};BX.onCustomEvent("onCompleteAction",[eventdata,wrapper])}}})}BX.ajax({method:"GET",dataType:"json",url:url,timeout:3,onsuccess:onReady,onfailure:onReady})}}function getCookie(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):null}function rememberProductRecommendation(item){const cookieName=BX.cookie_prefix+"_RCM_PRODUCT_LOG";let cookie=getCookie(cookieName),itemFound=!1,cItems=[],cItem;cookie&&(cItems=cookie.split("."));let i=cItems.length;for(;i--;)cItem=cItems[i].split("-"),cItem[0]==item?(cItem=cItems[i].split("-"),cItem[1]="mostviewed",cItem[2]=BX.current_server_time,cItems[i]=cItem.join("-"),itemFound=!0):BX.current_server_time-cItem[2]>2592e3&&cItems.splice(i,1);itemFound||cItems.push([item,"mostviewed",BX.current_server_time].join("-"));let plNewCookie=cItems.join("."),cookieDate=new Date((new Date).getTime()+31536e7).toUTCString();document.cookie=cookieName+"="+plNewCookie+"; path=/; expires="+cookieDate+"; domain="+BX.cookie_domain}BX.addCustomEvent("onCompleteAction",(function(eventdata,_this){const wrapperItem=$(_this).closest(".item");"loadForm"===eventdata.action&&"Y"===wrapperItem.data("bigdata")&&rememberProductRecommendation(wrapperItem.data("id"))})),$(document).on("click","[data-bigdata] a",(function(){rememberProductRecommendation($(this).closest("[data-bigdata]").data("id"))}));