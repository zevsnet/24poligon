!function(window){window.setDeliverySKU=function(th,obj){var buyBlock=th.find(".offer_buy_block"),input_value=obj.CONFIG.MIN_QUANTITY_BUY;buyBlock.find("input[name=quantity]").length&&(input_value=buyBlock.find("input[name=quantity]").val());var $calculate=buyBlock.closest(".catalog_detail").find(".calculate-delivery");if($calculate.length&&($calculate.each((function(){var $calculateSpan=$(this).find("span[data-event=jqm]").first();if($calculateSpan.length){var $clone=$calculateSpan.clone();$clone.attr("data-param-product_id",obj.ID).attr("data-param-quantity",input_value).removeClass("clicked"),$clone.insertAfter($calculateSpan).on("click",(function(){$(this).parent().addClass("loadings")})),$calculateSpan.remove()}if($(this).hasClass("with_preview")){$(this).removeClass("inited"),this.timerInitCalculateDelivery&&clearTimeout(this.timerInitCalculateDelivery);var that=this;this.timerInitCalculateDelivery=setTimeout((function(){initCalculatePreview(),that.timerInitCalculateDelivery=!1}),1e3)}})),"ADD"===obj.CONFIG.ACTION&&!0===obj.CONFIG.CAN_BUY?$calculate.show():$calculate.hide()),th.find(".cheaper_form").length){var cheaper_form=th.find(".cheaper_form span");cheaper_form.data("autoload-product_name",obj.NAME),cheaper_form.data("autoload-product_id",obj.ID)}InitFancyBoxVideo(),"object"==typeof obMaxPredictions&&obMaxPredictions.showAll()},window.UpdatePropsSKU=function(container,obj){const $props=container.find(".js-offers-prop:first");if($props.length&&(container.find(".js-prop").remove(),obj.DISPLAY_PROPERTIES)){if(!Object.keys(obj.DISPLAY_PROPERTIES).length)return;if(!window.propTemplate){let $clone=$props.clone();$clone.find("> *:not(:first-child)").remove(),$clone.find(".js-prop-replace").removeClass("js-prop-replace").addClass("js-prop"),$clone.find(".js-prop-title").text("#PROP_TITLE#"),$clone.find(".js-prop-value").text("#PROP_VALUE#"),$clone.find(".hint").remove();let cloneHtml=$clone.html();window.propTemplate=cloneHtml}let html="";for(let key in obj.DISPLAY_PROPERTIES){let title=obj.DISPLAY_PROPERTIES[key].NAME,value=obj.DISPLAY_PROPERTIES[key].DISPLAY_VALUE||obj.DISPLAY_PROPERTIES[key].VALUE,str;html+=window.propTemplate.replace("#PROP_TITLE#",title).replace("#PROP_VALUE#",value)}html&&$props[0].insertAdjacentHTML("beforeend",html)}},window.UpdateGroupPropsSKU=function(container,obj){const $props=container.find(".js-offers-group-wrap:first");if($props.length&&(container.find(".js-offers-group").remove(),container.find(".js-offers-group__item").remove(),obj.DISPLAY_PROPERTIES&&obj.PROPS_GROUP_HTML)){if(!Object.keys(obj.DISPLAY_PROPERTIES).length)return;let tmpDiv=document.createElement("div");tmpDiv.innerHTML=obj.PROPS_GROUP_HTML;let offerPropGroups=tmpDiv.querySelectorAll(".js-offers-group"),noGroupContainer=container.find("[data-group-code='no-group']");if(offerPropGroups.length){let groupCode,elementPropGroup;for(let keyGroup=0;keyGroup<offerPropGroups.length;keyGroup++)groupCode=offerPropGroups[keyGroup].getAttribute("data-group-code"),elementPropGroup=container.find("[data-group-code='"+groupCode+"'] .js-offers-group__items-wrap"),elementPropGroup.length?elementPropGroup.append(offerPropGroups[keyGroup].querySelectorAll(".js-offers-group__item")):noGroupContainer.length?noGroupContainer.before(offerPropGroups[keyGroup]):$props.append(offerPropGroups[keyGroup])}}},window.SetSliderPictSKU=function(obj,wrapper){var mainConteiner=wrapper.closest(".catalog_detail"),container=mainConteiner.find(".product-detail-gallery__slider--big"),containerThmb=mainConteiner.find(".product-detail-gallery__slider.thmb"),slideHtml="",slideThmbHtml="";if(countPhoto=obj.GALLERY.length,product=mainConteiner,containerThmb.css({"max-width":Math.ceil(70*(countPhoto<=4?countPhoto:4)-10)}),countPhoto<=1?containerThmb.addClass("hidden"):containerThmb.removeClass("hidden"),obj.GALLERY.length){for(var i in obj.GALLERY)"object"==typeof obj.GALLERY[i]&&(slideHtml+='<div id="photo-'+i+'" class="product-detail-gallery__item product-detail-gallery__item--big text-center" data-big="'+obj.GALLERY[i].BIG.src+'"><a href="'+obj.GALLERY[i].BIG.src+'" data-fancybox="gallery" class="product-detail-gallery__link fancy"><img class="product-detail-gallery__picture" border="0" src="'+obj.GALLERY[i].SMALL.src+'" alt="'+obj.GALLERY[i].ALT+'" title="'+obj.GALLERY[i].TITLE+'" /></a></div>');if(countPhoto>1)for(var i in obj.GALLERY)"object"==typeof obj.GALLERY[i]&&(slideThmbHtml+='<div class="product-detail-gallery__item product-detail-gallery__item--thmb text-center" data-big="'+obj.GALLERY[i].BIG.src+'"><img class="product-detail-gallery__picture" border="0" src="'+obj.GALLERY[i].SMALL.src+'" alt="'+obj.GALLERY[i].ALT+'" title="'+obj.GALLERY[i].TITLE+'" data-xoriginalwidth="'+obj.GALLERY[i].BIG.width+'" data-xoriginalheight="'+obj.GALLERY[i].BIG.height+'" /></div>')}else slideHtml+='<div class="product-detail-gallery__item product-detail-gallery__item--big text-center"><span class="product-detail-gallery__link"><img class="product-detail-gallery__picture" border="0" src="'+mainItemForOffers.NO_PHOTO+'" alt="'+obj.NAME+'" title="'+obj.NAME+'" /></span></div>';container.html(slideHtml),containerThmb.attr("data-size",countPhoto).html(slideThmbHtml),product.find(".popup_video").remove();let popUpVideo=obj.POPUP_VIDEO?obj.POPUP_VIDEO:mainItemForOffers.POPUP_VIDEO;if(popUpVideo){let popupHtml='<div class="video-block popup_video '+(obj.GALLERY.length>4?"fromtop":"")+' sm"><a class="various video_link image dark_link" href="'+popUpVideo+'" title="'+BX.message("POPUP_VIDEO")+'"><span class="play text-upper font_xs">'+BX.message("POPUP_VIDEO")+"</span></a></div>";if(containerThmb.length)$(popupHtml).insertAfter(containerThmb);else{let fastViewConteiner=mainConteiner.find(".fastview-product__top-info");fastViewConteiner.length&&$(popupHtml).appendTo(fastViewConteiner)}}if(slideThmbHtml||product.find(".popup_video").addClass("only-item"),void 0!==container.data("owl.carousel")&&container.data("owl.carousel").destroy(),void 0!==containerThmb.data("owl.carousel")&&containerThmb.data("owl.carousel").destroy(),InitOwlSlider(),InitFancyBox(),InitFancyBoxVideo(),"MAGNIFIER"==arAsproOptions.THEME.DETAIL_PICTURE_MODE){var pict="";pict=obj.GALLERY&&obj.GALLERY[0]?'<img class="product-detail-gallery__picture zoom_picture" border="0" src="'+obj.GALLERY[0].SMALL.src+'" alt="'+obj.GALLERY[0].ALT+'" title="'+obj.GALLERY[0].TITLE+'" data-xoriginal="'+obj.GALLERY[0].BIG.src+'" data-xoriginalwidth="'+obj.GALLERY[0].BIG.width+'" data-xoriginalheight="'+obj.GALLERY[0].BIG.height+'"/>':'<img class="product-detail-gallery__picture one" border="0" src="'+mainItemForOffers.NO_PHOTO+'" alt="'+obj.NAME+'" title="'+obj.NAME+'" data-xoriginal2="'+mainItemForOffers.NO_PHOTO+'"/>',product.find(".line_link").length?product.find(".line_link").html(pict):(product.find(".product-detail-gallery__picture.one").length||product.find(".product-detail-gallery__picture.zoom_picture").length)&&product.find("#photo-sku").html(pict),InitZoomPict()}if(obj.GALLERY.length){let newOfferImage=obj.GALLERY[0].BIG.src?obj.GALLERY[0].BIG.src:obj.GALLERY[0].SRC;mainConteiner.find('.product-detail-gallery__container link[itemprop="image"]').attr("href",newOfferImage)}},window.SetArticleSKU=function(obj,wrapper){let articleBlock=wrapper.find(".product-info-headnote__article .article");if(articleBlock){var article_text=obj.ARTICLE?obj.ARTICLE:"";!article_text&&"Y"==obj.SHOW_ARTICLE_SKU&&mainItemForOffers.ARTICLE&&(article_text=mainItemForOffers.ARTICLE),articleBlock.find(".article__value").length&&articleBlock.find(".article__value").text(article_text),article_text?articleBlock.show():articleBlock.hide();let article_name=obj.ARTICLE_NAME?obj.ARTICLE_NAME:"";article_name&&articleBlock.find(".article__title").length&&articleBlock.find(".article__title").text(article_name+":")}},window.SetHrefSKU=function(obj,wrapper){let titleHref=wrapper.find(".fast-view-title"),bottomHref=wrapper.find(".bottom-href-fast-view");titleHref.length&&titleHref.attr("href",obj.URL),bottomHref.length&&bottomHref.attr("href",obj.URL)},window.SetServicesSKU=function(obj,wrapper){var servWrap=wrapper.closest(".product-container").find(".buy_services_wrap");servWrap.length&&(servWrap.attr("data-parent_product",obj.ID),servWrap.find(".services-item").each((function(){var serviceItem=$(this),basketItem=arBasketAspro.SERVICES[serviceItem.attr("data-item_id")+"_"+obj.ID];void 0!==basketItem&&basketItem.basket_id?(serviceItem.find('input[name="buy_switch_services"]').prop("checked",!0),serviceItem.find('.counter_block input[name="quantity"]').val(basketItem.quantity),serviceItem.addClass("services_on")):(serviceItem.removeClass("services_on"),serviceItem.find('input[name="buy_switch_services"]').prop("checked",!1))})))},window.SetTitleSKU=function(obj,wrapper){if("Y"==arMaxOptions.THEME.CHANGE_TITLE_ITEM_DETAIL){var skuName="object"==typeof obj.IPROPERTY_VALUES&&obj.IPROPERTY_VALUES.ELEMENT_PAGE_TITLE?obj.IPROPERTY_VALUES.ELEMENT_PAGE_TITLE:obj.NAME,skuWindowTitle="object"==typeof obj.IPROPERTY_VALUES&&obj.IPROPERTY_VALUES.ELEMENT_META_TITLE?obj.IPROPERTY_VALUES.ELEMENT_META_TITLE:obj.NAME,bFastView;wrapper.find(".fastview-product").length?wrapper.find(".fast-view-title").html(skuName):($("h1").html(skuName),document.title=skuWindowTitle+""+mainItemForOffers.POSTFIX,"object"==typeof ItemObj&&(ItemObj.TITLE=skuName,ItemObj.WINDOW_TITLE=skuWindowTitle))}$('.catalog_detail input[data-sid="PRODUCT_NAME"]').attr("value",$("h1").text())},window.setDescriptionSKU=function(wrapper,obj){var block=wrapper,isDetail=block.hasClass("product-main"),detailTextBlock=block.closest(".product-container").find(".detail-text-wrap"),previewTextBlock=block.find(".preview-text-replace");isDetail&&detailTextBlock.length&&mainItemForOffers.SHOW_SKU_DESCRIPTION&&(obj.DETAIL_TEXT.length?$(".detail-text-wrap").html(obj.DETAIL_TEXT):mainItemForOffers.DETAIL_TEXT.length&&$(".detail-text-wrap").html(mainItemForOffers.DETAIL_TEXT)),isDetail&&previewTextBlock.length&&mainItemForOffers.SHOW_SKU_DESCRIPTION&&(obj.PREVIEW_TEXT.length?previewTextBlock.html(obj.PREVIEW_TEXT):mainItemForOffers.PREVIEW_TEXT.length&&previewTextBlock.html(mainItemForOffers.PREVIEW_TEXT))},window.setOfferSetSKU=function(obj,wrapper){var mainWrap=wrapper.closest(".product-container"),offerSet=mainWrap.find("[data-offerSetId]"),currentOfferSet=mainWrap.find("[data-offerSetId="+obj.ID+"]");offerSet.length&&offerSet.hide(),offerSet.length&&currentOfferSet.show()},window.SetViewedSKU=function(obj){var arPriceItem=obj.MIN_PRICE;setViewedProduct(obj.ID,{PRODUCT_ID:mainItemForOffers.PRODUCT_ID,IBLOCK_ID:obj.IBLOCK_ID,NAME:obj.NAME,DETAIL_PAGE_URL:obj.URL,PICTURE_ID:obj.PREVIEW_PICTURE_FIELD?obj.PREVIEW_PICTURE_FIELD.ID:obj.PARENT_PICTURE?obj.PARENT_PICTURE.ID:!!obj.GALLERY.length&&obj.GALLERY[0].ID,CATALOG_MEASURE_NAME:obj.MEASURE,MIN_PRICE:arPriceItem,CAN_BUY:obj.CONFIG.CAN_BUY?"Y":"N",IS_OFFER:"Y",WITH_OFFERS:"N"})},window.SetAdditionalGallerySKU=function(obj,wrapper){var $gallery=wrapper.closest(".product-container").find(".additional-gallery");if(void 0!==window.scrollTabsTimeout&&clearTimeout(window.scrollTabsTimeout),"function"==typeof ResizeScrollTabs&&(window.scrollTabsTimeout=setTimeout(ResizeScrollTabs,20)),$gallery.length){var bHidden=$gallery.hasClass("hidden"),bigGallery=$gallery.find(".big-gallery-block .owl-carousel"),smallGallery=$gallery.find(".small-gallery-block .row"),slideBigHtml=slideSmallHtml="",descTab=$('.nav.nav-tabs [href="#desc"]').closest("li"),galleryItems=obj.ADDITIONAL_GALLERY.concat(mainItemForOffers.ADDITIONAL_GALLERY);if(galleryItems.length){for(var i in bHidden&&($gallery.removeClass("hidden"),bigGallery.removeClass("owl-hidden"),descTab.removeClass("hidden")),$gallery.find(".switch-item-block .switch-item-block__count-wrapper--small .switch-item-block__count-value").text(galleryItems.length),$gallery.find(".switch-item-block .switch-item-block__count-wrapper--big .switch-item-block__count-value").text("1/"+galleryItems.length),galleryItems)"object"==typeof galleryItems[i]&&(slideBigHtml+='<div class="item"><a href="'+galleryItems[i].DETAIL.SRC+'" data-fancybox="big-gallery" class="fancy"><img class="picture" border="0" src="'+galleryItems[i].PREVIEW.src+'" alt="'+galleryItems[i].ALT+'" title="'+galleryItems[i].TITLE+'" /></a></div>',slideSmallHtml+='<div class="col-md-3"><div class="item"><a href="'+galleryItems[i].DETAIL.SRC+'" data-fancybox="small-gallery" class="fancy"><img class="picture" border="0" src="'+galleryItems[i].PREVIEW.src+'" alt="'+galleryItems[i].ALT+'" title="'+galleryItems[i].TITLE+'" /></a></div></div>');bigGallery.html(slideBigHtml),smallGallery.html(slideSmallHtml),void 0!==bigGallery.data("owl.carousel")&&bigGallery.data("owl.carousel").destroy(),InitOwlSlider(),InitFancyBox(),"function"==typeof ResizeScrollTabs&&ResizeScrollTabs()}else $gallery.addClass("hidden"),$gallery.closest(".tab-pane").find(".ordered-block").length<=1&&0===$gallery.closest(".tab-pane").find(".detail-text-wrap").length&&(descTab.addClass("hidden"),SetActiveTab($(wrapper.closest(".product-container").find(".tabs > .nav-tabs > li"))),"function"==typeof ResizeScrollTabs&&ResizeScrollTabs())}},window.SetActiveTab=function(wrapperTabs){wrapperTabs.each((function(){var _this=$(this);_this.hasClass("active")&&_this.hasClass("hidden")?_this.next().find("a").click():$(this).hasClass("hidden")&&_this.next().find("a").click()}))}}(window);